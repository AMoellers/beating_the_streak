<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" lang="en" xml:lang="en"><head>

<meta charset="utf-8">
<meta name="generator" content="quarto-1.5.57">

<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes">

<meta name="author" content="Austin Moellers">
<meta name="dcterms.date" content="2025-04-02">

<title>Beating the Streak – Beating the streak</title>
<style>
code{white-space: pre-wrap;}
span.smallcaps{font-variant: small-caps;}
div.columns{display: flex; gap: min(4vw, 1.5em);}
div.column{flex: auto; overflow-x: auto;}
div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
ul.task-list{list-style: none;}
ul.task-list li input[type="checkbox"] {
  width: 0.8em;
  margin: 0 0.8em 0.2em -1em; /* quarto-specific, see https://github.com/quarto-dev/quarto-cli/issues/4556 */ 
  vertical-align: middle;
}
</style>


<script src="site_libs/quarto-nav/quarto-nav.js"></script>
<script src="site_libs/clipboard/clipboard.min.js"></script>
<script src="site_libs/quarto-search/autocomplete.umd.js"></script>
<script src="site_libs/quarto-search/fuse.min.js"></script>
<script src="site_libs/quarto-search/quarto-search.js"></script>
<meta name="quarto:offset" content="./">
<script src="site_libs/quarto-html/quarto.js"></script>
<script src="site_libs/quarto-html/popper.min.js"></script>
<script src="site_libs/quarto-html/tippy.umd.min.js"></script>
<script src="site_libs/quarto-html/anchor.min.js"></script>
<link href="site_libs/quarto-html/tippy.css" rel="stylesheet">
<link href="site_libs/quarto-html/quarto-syntax-highlighting.css" rel="stylesheet" id="quarto-text-highlighting-styles">
<script src="site_libs/bootstrap/bootstrap.min.js"></script>
<link href="site_libs/bootstrap/bootstrap-icons.css" rel="stylesheet">
<link href="site_libs/bootstrap/bootstrap.min.css" rel="stylesheet" id="quarto-bootstrap" data-mode="light">
<script id="quarto-search-options" type="application/json">{
  "location": "sidebar",
  "copy-button": false,
  "collapse-after": 3,
  "panel-placement": "start",
  "type": "textbox",
  "limit": 50,
  "keyboard-shortcut": [
    "f",
    "/",
    "s"
  ],
  "show-item-context": false,
  "language": {
    "search-no-results-text": "No results",
    "search-matching-documents-text": "matching documents",
    "search-copy-link-title": "Copy link to search",
    "search-hide-matches-text": "Hide additional matches",
    "search-more-match-text": "more match in this document",
    "search-more-matches-text": "more matches in this document",
    "search-clear-button-title": "Clear",
    "search-text-placeholder": "",
    "search-detached-cancel-button-title": "Cancel",
    "search-submit-button-title": "Submit",
    "search-label": "Search"
  }
}</script>
<style>html{ scroll-behavior: smooth; }</style>


</head>

<body>

<div id="quarto-search-results"></div>
<!-- content -->
<div id="quarto-content" class="quarto-container page-columns page-rows-contents page-layout-article">
<!-- sidebar -->
<!-- margin-sidebar -->
    <div id="quarto-margin-sidebar" class="sidebar margin-sidebar">
        <nav id="TOC" role="doc-toc" class="toc-active">
    <h2 id="toc-title">On this page</h2>
   
  <ul>
  <li><a href="#what-is-beat-the-streak" id="toc-what-is-beat-the-streak" class="nav-link active" data-scroll-target="#what-is-beat-the-streak">What is “Beat the Streak”?</a></li>
  <li><a href="#strategy" id="toc-strategy" class="nav-link" data-scroll-target="#strategy">Strategy</a></li>
  <li><a href="#datasets" id="toc-datasets" class="nav-link" data-scroll-target="#datasets">Datasets</a></li>
  <li><a href="#insights" id="toc-insights" class="nav-link" data-scroll-target="#insights">2024 Insights</a></li>
  <li><a href="#modelling" id="toc-modelling" class="nav-link" data-scroll-target="#modelling">Modelling</a></li>
  <li><a href="#simulation" id="toc-simulation" class="nav-link" data-scroll-target="#simulation">Simulation</a></li>
  <li><a href="#is-the-streak-beatable" id="toc-is-the-streak-beatable" class="nav-link" data-scroll-target="#is-the-streak-beatable">Is the streak beatable?</a></li>
  </ul>
<div class="quarto-other-links"><h2>Other Links</h2><ul><li><a href="https://github.com/amoellers/"><i class="bi bi-github"></i>GitHub</a></li><li><a href="https://www.linkedin.com/in/austinmoellers/"><i class="bi bi-linkedin"></i>LinkedIn</a></li><li><a href="https://austin.quarto.pub/"><i class="bi bi-book"></i>Quarto Pub</a></li></ul></div><div class="quarto-code-links"><h2>Code Links</h2><ul><li><a href="https://github.com/amoellers/beating_the_streak/" target="_blank"><i class="bi bi-github"></i>GitHub Repo</a></li></ul></div></nav>
    </div>
<!-- main -->
<main class="content" id="quarto-document-content">

<header id="title-block-header" class="quarto-title-block default">
<div class="quarto-title">
<h1 class="title">Beating the Streak</h1>
</div>



<div class="quarto-title-meta">

    <div>
    <div class="quarto-title-meta-heading">Author</div>
    <div class="quarto-title-meta-contents">
             <p>Austin Moellers <a href="mailto:AustinMoellers@Outlook.com" class="quarto-title-author-email"><i class="bi bi-envelope"></i></a> </p>
          </div>
  </div>
    
    <div>
    <div class="quarto-title-meta-heading">Published</div>
    <div class="quarto-title-meta-contents">
      <p class="date">April 2, 2025</p>
    </div>
  </div>
  
    
  </div>
  


</header>


<section id="what-is-beat-the-streak" class="level2">
<h2 class="anchored" data-anchor-id="what-is-beat-the-streak">What is “Beat the Streak”?</h2>
<p><a href="https://www.mlb.com/apps/beat-the-streak">Beat the Streak</a> (BTS) is a yearly contest run by MLB where contestants are tasked with selecting up to two batters per day that they hope will get a hit on that day. The ultimate goal is to surpass <a href="https://www.baseball-reference.com/players/d/dimagjo01.shtml">Joe DiMaggio</a>’s all-time best <a href="https://en.wikipedia.org/wiki/Joe_DiMaggio%27s_56-game_hitting_streak">56-game hitting streak</a> and claim the elusive $5,600,000 grand prize.</p>
<p>Although the contest was introduced in 2001, the all-time record is a hit-streak of 51 by both “Robert Mosley” and “Rmares483”. This begs the question, will the contest ever be beaten? and is it even possible?</p>
</section>
<section id="strategy" class="level2">
<h2 class="anchored" data-anchor-id="strategy">Strategy</h2>
<p>When it comes to BTS, everyone is going to have their own strategy for making selections. Some people may only make a couple selections a week, while others may choose two batters every day. Some people may base their choices on statistics like batting average (BA) or earned run average (ERA), while others may look at expected batting average (xBA) or walk rate (BB%). Additionally, keen contestants may consider others factors like weather or bullpen composition.</p>
<p>These are some of the variables that I consider when making BTS predictions, sorted roughly by most to least important.</p>
<ul>
<li>Batter strength (high xBA, low BB%)</li>
<li>Starting pitcher strength (high xBA, low BB%, low K%)</li>
<li>Park factors</li>
<li>Batter / starting pitcher matchup (handedness, history)</li>
<li>Elemental factors (temperature, wind, humidity)</li>
<li>Bullpen strength &amp; availability</li>
<li>Lineup position</li>
</ul>
<p>I also generally select two batters every day using the “Double Down Feature”.</p>
</section>
<section id="datasets" class="level2">
<h2 class="anchored" data-anchor-id="datasets">Datasets</h2>
<p>The most important dataset for this analysis is the <a href="https://www.retrosheet.org/game.htm">Retrosheet</a> play-by-play data. This data includes the information necessary to determine which batters were available to select on which days and whether they were successful in acquiring a hit. This data was obtained using the <code>abdwr3edata::parse_retrosheet_pbp()</code> function.</p>
<div class="cell">
<div class="cell-output-display">
<table class="caption-top table table-sm table-striped small">
<colgroup>
<col style="width: 13%">
<col style="width: 12%">
<col style="width: 9%">
<col style="width: 12%">
<col style="width: 9%">
<col style="width: 12%">
<col style="width: 13%">
<col style="width: 6%">
<col style="width: 6%">
<col style="width: 5%">
</colgroup>
<thead>
<tr class="header">
<th style="text-align: left;">game_id</th>
<th style="text-align: right;">bat_home_id</th>
<th style="text-align: left;">bat_id</th>
<th style="text-align: left;">bat_hand_cd</th>
<th style="text-align: left;">pit_id</th>
<th style="text-align: left;">pit_hand_cd</th>
<th style="text-align: left;">bat_event_fl</th>
<th style="text-align: left;">ab_fl</th>
<th style="text-align: left;">sf_fl</th>
<th style="text-align: right;">h_fl</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td style="text-align: left;">TEX202309080</td>
<td style="text-align: right;">0</td>
<td style="text-align: left;">geloz001</td>
<td style="text-align: left;">R</td>
<td style="text-align: left;">montj004</td>
<td style="text-align: left;">L</td>
<td style="text-align: left;">TRUE</td>
<td style="text-align: left;">TRUE</td>
<td style="text-align: left;">FALSE</td>
<td style="text-align: right;">0</td>
</tr>
<tr class="even">
<td style="text-align: left;">DET202208300</td>
<td style="text-align: right;">1</td>
<td style="text-align: left;">greer003</td>
<td style="text-align: left;">L</td>
<td style="text-align: left;">flexc001</td>
<td style="text-align: left;">R</td>
<td style="text-align: left;">TRUE</td>
<td style="text-align: left;">TRUE</td>
<td style="text-align: left;">FALSE</td>
<td style="text-align: right;">3</td>
</tr>
<tr class="odd">
<td style="text-align: left;">SLN202108040</td>
<td style="text-align: right;">0</td>
<td style="text-align: left;">rilea001</td>
<td style="text-align: left;">R</td>
<td style="text-align: left;">garcl005</td>
<td style="text-align: left;">R</td>
<td style="text-align: left;">TRUE</td>
<td style="text-align: left;">TRUE</td>
<td style="text-align: left;">FALSE</td>
<td style="text-align: right;">0</td>
</tr>
<tr class="even">
<td style="text-align: left;">CHN202206300</td>
<td style="text-align: right;">1</td>
<td style="text-align: left;">gomey001</td>
<td style="text-align: left;">R</td>
<td style="text-align: left;">ashcg001</td>
<td style="text-align: left;">R</td>
<td style="text-align: left;">TRUE</td>
<td style="text-align: left;">TRUE</td>
<td style="text-align: left;">FALSE</td>
<td style="text-align: right;">0</td>
</tr>
<tr class="odd">
<td style="text-align: left;">MIL202105010</td>
<td style="text-align: right;">0</td>
<td style="text-align: left;">lux-g001</td>
<td style="text-align: left;">L</td>
<td style="text-align: left;">woodb005</td>
<td style="text-align: left;">R</td>
<td style="text-align: left;">FALSE</td>
<td style="text-align: left;">FALSE</td>
<td style="text-align: left;">FALSE</td>
<td style="text-align: right;">0</td>
</tr>
</tbody>
</table>
</div>
</div>
<p>The next dataset is the <a href="https://baseballsavant.mlb.com">Baseball Savant</a> “expected statistics” leaderboard which includes the true and expected batting averages, on-base percentages, slugging percentages, and weighted on-base averages for qualified batters and pitchers. This data was acquired using the <code>baseballr::statcast_leaderboards()</code> function.</p>
<div class="cell">
<div class="cell-output-display">
<table class="caption-top table table-sm table-striped small">
<colgroup>
<col style="width: 5%">
<col style="width: 11%">
<col style="width: 22%">
<col style="width: 4%">
<col style="width: 4%">
<col style="width: 7%">
<col style="width: 8%">
<col style="width: 7%">
<col style="width: 9%">
<col style="width: 7%">
<col style="width: 10%">
</colgroup>
<thead>
<tr class="header">
<th style="text-align: right;">year</th>
<th style="text-align: right;">player_id</th>
<th style="text-align: left;">player</th>
<th style="text-align: right;">pa</th>
<th style="text-align: right;">bip</th>
<th style="text-align: right;">ba</th>
<th style="text-align: right;">est_ba</th>
<th style="text-align: right;">slg</th>
<th style="text-align: right;">est_slg</th>
<th style="text-align: right;">woba</th>
<th style="text-align: right;">est_woba</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td style="text-align: right;">2024</td>
<td style="text-align: right;">457705</td>
<td style="text-align: left;">McCutchen, Andrew</td>
<td style="text-align: right;">515</td>
<td style="text-align: right;">317</td>
<td style="text-align: right;">0.232</td>
<td style="text-align: right;">0.227</td>
<td style="text-align: right;">0.411</td>
<td style="text-align: right;">0.421</td>
<td style="text-align: right;">0.325</td>
<td style="text-align: right;">0.327</td>
</tr>
<tr class="even">
<td style="text-align: right;">2022</td>
<td style="text-align: right;">601713</td>
<td style="text-align: left;">Pivetta, Nick</td>
<td style="text-align: right;">773</td>
<td style="text-align: right;">520</td>
<td style="text-align: right;">0.253</td>
<td style="text-align: right;">0.248</td>
<td style="text-align: right;">0.425</td>
<td style="text-align: right;">0.433</td>
<td style="text-align: right;">0.330</td>
<td style="text-align: right;">0.332</td>
</tr>
<tr class="odd">
<td style="text-align: right;">2024</td>
<td style="text-align: right;">684007</td>
<td style="text-align: left;">Imanaga, Shota</td>
<td style="text-align: right;">694</td>
<td style="text-align: right;">489</td>
<td style="text-align: right;">0.225</td>
<td style="text-align: right;">0.234</td>
<td style="text-align: right;">0.385</td>
<td style="text-align: right;">0.390</td>
<td style="text-align: right;">0.279</td>
<td style="text-align: right;">0.286</td>
</tr>
<tr class="even">
<td style="text-align: right;">2021</td>
<td style="text-align: right;">592743</td>
<td style="text-align: left;">Simmons, Andrelton</td>
<td style="text-align: right;">451</td>
<td style="text-align: right;">354</td>
<td style="text-align: right;">0.223</td>
<td style="text-align: right;">0.230</td>
<td style="text-align: right;">0.274</td>
<td style="text-align: right;">0.281</td>
<td style="text-align: right;">0.252</td>
<td style="text-align: right;">0.261</td>
</tr>
<tr class="odd">
<td style="text-align: right;">2021</td>
<td style="text-align: right;">640448</td>
<td style="text-align: left;">Finnegan, Kyle</td>
<td style="text-align: right;">294</td>
<td style="text-align: right;">189</td>
<td style="text-align: right;">0.251</td>
<td style="text-align: right;">0.220</td>
<td style="text-align: right;">0.404</td>
<td style="text-align: right;">0.360</td>
<td style="text-align: right;">0.324</td>
<td style="text-align: right;">0.298</td>
</tr>
</tbody>
</table>
</div>
</div>
<p>Finally, the pitch-by-pitch dataset from <a href="https://baseballsavant.mlb.com">Baseball Savant</a> provides information on every pitch thrown during an MLB season. This data was acquired using the <code>baseballr::statcast_search()</code> function.</p>
<div class="cell">
<div class="cell-output-display">
<table class="caption-top table table-sm table-striped small">
<colgroup>
<col style="width: 9%">
<col style="width: 10%">
<col style="width: 10%">
<col style="width: 13%">
<col style="width: 6%">
<col style="width: 7%">
<col style="width: 9%">
<col style="width: 29%">
</colgroup>
<thead>
<tr class="header">
<th style="text-align: left;">game_type</th>
<th style="text-align: left;">game_date</th>
<th style="text-align: left;">pitch_type</th>
<th style="text-align: right;">release_speed</th>
<th style="text-align: right;">batter</th>
<th style="text-align: right;">pitcher</th>
<th style="text-align: left;">events</th>
<th style="text-align: right;">estimated_ba_using_speedangle</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td style="text-align: left;">R</td>
<td style="text-align: left;">2024-03-28</td>
<td style="text-align: left;">FF</td>
<td style="text-align: right;">91.7</td>
<td style="text-align: right;">676694</td>
<td style="text-align: right;">641482</td>
<td style="text-align: left;">strikeout</td>
<td style="text-align: right;">NA</td>
</tr>
<tr class="even">
<td style="text-align: left;">R</td>
<td style="text-align: left;">2024-09-14</td>
<td style="text-align: left;">SL</td>
<td style="text-align: right;">86.8</td>
<td style="text-align: right;">643217</td>
<td style="text-align: right;">669372</td>
<td style="text-align: left;">strikeout</td>
<td style="text-align: right;">NA</td>
</tr>
<tr class="odd">
<td style="text-align: left;">R</td>
<td style="text-align: left;">2024-07-14</td>
<td style="text-align: left;">CH</td>
<td style="text-align: right;">90.6</td>
<td style="text-align: right;">595777</td>
<td style="text-align: right;">628452</td>
<td style="text-align: left;">field_out</td>
<td style="text-align: right;">0.974</td>
</tr>
<tr class="even">
<td style="text-align: left;">R</td>
<td style="text-align: left;">2024-06-03</td>
<td style="text-align: left;">CH</td>
<td style="text-align: right;">83.7</td>
<td style="text-align: right;">676914</td>
<td style="text-align: right;">680570</td>
<td style="text-align: left;">single</td>
<td style="text-align: right;">0.280</td>
</tr>
<tr class="odd">
<td style="text-align: left;">R</td>
<td style="text-align: left;">2023-04-23</td>
<td style="text-align: left;">CU</td>
<td style="text-align: right;">81.9</td>
<td style="text-align: right;">519058</td>
<td style="text-align: right;">554430</td>
<td style="text-align: left;">strikeout</td>
<td style="text-align: right;">NA</td>
</tr>
</tbody>
</table>
</div>
</div>
<p>To create a data frame of all possible BTS selections, the play-by-play data is summarized and merged with the Statcast leaderboards. Along with the batters available for selection, this data frame includes the date, park, opposing starting pitcher, handedness for both players, season xBA for both players, and a flag for whether the player acquired a hit.</p>
<div class="cell">
<div class="cell-output-display">
<table class="caption-top table table-sm table-striped small">
<colgroup>
<col style="width: 11%">
<col style="width: 5%">
<col style="width: 17%">
<col style="width: 9%">
<col style="width: 11%">
<col style="width: 19%">
<col style="width: 9%">
<col style="width: 11%">
<col style="width: 5%">
</colgroup>
<thead>
<tr class="header">
<th style="text-align: left;">date</th>
<th style="text-align: left;">park</th>
<th style="text-align: left;">batter</th>
<th style="text-align: left;">hand_bat</th>
<th style="text-align: right;">est_ba_bat</th>
<th style="text-align: left;">pitcher</th>
<th style="text-align: left;">hand_pit</th>
<th style="text-align: right;">est_ba_pit</th>
<th style="text-align: left;">h_fl</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td style="text-align: left;">2021-07-05</td>
<td style="text-align: left;">SFN</td>
<td style="text-align: left;">Brandon Crawford</td>
<td style="text-align: left;">L</td>
<td style="text-align: right;">0.259</td>
<td style="text-align: left;">Kwang Hyun Kim</td>
<td style="text-align: left;">L</td>
<td style="text-align: right;">0.252</td>
<td style="text-align: left;">TRUE</td>
</tr>
<tr class="even">
<td style="text-align: left;">2023-07-17</td>
<td style="text-align: left;">ANA</td>
<td style="text-align: left;">Gleyber Torres</td>
<td style="text-align: left;">R</td>
<td style="text-align: right;">0.282</td>
<td style="text-align: left;">Griffin Canning</td>
<td style="text-align: left;">R</td>
<td style="text-align: right;">0.236</td>
<td style="text-align: left;">TRUE</td>
</tr>
<tr class="odd">
<td style="text-align: left;">2024-06-07</td>
<td style="text-align: left;">TEX</td>
<td style="text-align: left;">Nathaniel Lowe</td>
<td style="text-align: left;">L</td>
<td style="text-align: right;">0.252</td>
<td style="text-align: left;">Logan Webb</td>
<td style="text-align: left;">R</td>
<td style="text-align: right;">0.272</td>
<td style="text-align: left;">TRUE</td>
</tr>
<tr class="even">
<td style="text-align: left;">2024-08-29</td>
<td style="text-align: left;">PHI</td>
<td style="text-align: left;">Marcell Ozuna</td>
<td style="text-align: left;">R</td>
<td style="text-align: right;">0.286</td>
<td style="text-align: left;">Cristopher Sánchez</td>
<td style="text-align: left;">L</td>
<td style="text-align: right;">0.258</td>
<td style="text-align: left;">TRUE</td>
</tr>
<tr class="odd">
<td style="text-align: left;">2023-04-05</td>
<td style="text-align: left;">KCA</td>
<td style="text-align: left;">George Springer</td>
<td style="text-align: left;">R</td>
<td style="text-align: right;">0.264</td>
<td style="text-align: left;">Zack Greinke</td>
<td style="text-align: left;">R</td>
<td style="text-align: right;">0.290</td>
<td style="text-align: left;">TRUE</td>
</tr>
</tbody>
</table>
</div>
</div>
</section>
<section id="insights" class="level2">
<h2 class="anchored" data-anchor-id="insights">2024 Insights</h2>
<p>Before attempting to create a model, here is a look at the top/bottom ten batters, pitchers, and parks that had the highest / lowest success rates for the 2024 MLB season.</p>
<p><a href="https://www.baseball-reference.com/players/w/wittbo02.shtml">Bobby Witt Jr.</a> was by far the best overall choice in 2024 with at least one hit in almost 80% of the games they played. Having <a href="https://www.baseball-reference.com/players/b/blachty01.shtml">Ty Blach</a> on the mound was advantageous for BTS selections, as almost 75% of opposing batters got a hit in games where they started. Unsurprisingly, <a href="https://www.baseball-reference.com/bullpen/Coors_Field">Coors Field</a> was the ideal park for BTS with almost 70% of batters acquiring a hit in games played in the Rocky Mountains.</p>
<div>

</div>
<div class="cell quarto-layout-panel" data-layout-ncol="3">
<div class="quarto-layout-row">
<div class="quarto-layout-cell" style="flex-basis: 33.3%;justify-content: center;">
<table class="caption-top table table-sm table-striped small">
<caption>Batters</caption>
<thead>
<tr class="header">
<th style="text-align: left;">batter</th>
<th style="text-align: right;">n</th>
<th style="text-align: right;">h</th>
<th style="text-align: right;">prop</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td style="text-align: left;">Bobby Witt Jr.</td>
<td style="text-align: right;">161</td>
<td style="text-align: right;">128</td>
<td style="text-align: right;">0.795</td>
</tr>
<tr class="even">
<td style="text-align: left;">José Altuve</td>
<td style="text-align: right;">151</td>
<td style="text-align: right;">116</td>
<td style="text-align: right;">0.768</td>
</tr>
<tr class="odd">
<td style="text-align: left;">Luis Arráez</td>
<td style="text-align: right;">146</td>
<td style="text-align: right;">111</td>
<td style="text-align: right;">0.760</td>
</tr>
<tr class="even">
<td style="text-align: left;">Vladimir Guerrero</td>
<td style="text-align: right;">158</td>
<td style="text-align: right;">120</td>
<td style="text-align: right;">0.759</td>
</tr>
<tr class="odd">
<td style="text-align: left;">Marcell Ozuna</td>
<td style="text-align: right;">162</td>
<td style="text-align: right;">122</td>
<td style="text-align: right;">0.753</td>
</tr>
<tr class="even">
<td style="text-align: left;">Jarren Duran</td>
<td style="text-align: right;">160</td>
<td style="text-align: right;">120</td>
<td style="text-align: right;">0.750</td>
</tr>
<tr class="odd">
<td style="text-align: left;">Yandy Díaz</td>
<td style="text-align: right;">140</td>
<td style="text-align: right;">104</td>
<td style="text-align: right;">0.743</td>
</tr>
<tr class="even">
<td style="text-align: left;">Yainer Diaz</td>
<td style="text-align: right;">146</td>
<td style="text-align: right;">107</td>
<td style="text-align: right;">0.733</td>
</tr>
<tr class="odd">
<td style="text-align: left;">Ketel Marte</td>
<td style="text-align: right;">127</td>
<td style="text-align: right;">93</td>
<td style="text-align: right;">0.732</td>
</tr>
<tr class="even">
<td style="text-align: left;">Shohei Ohtani</td>
<td style="text-align: right;">159</td>
<td style="text-align: right;">116</td>
<td style="text-align: right;">0.730</td>
</tr>
</tbody>
</table>
</div>
<div class="quarto-layout-cell" style="flex-basis: 33.3%;justify-content: center;">
<table class="caption-top table table-sm table-striped small">
<caption>Pitchers</caption>
<thead>
<tr class="header">
<th style="text-align: left;">pitcher</th>
<th style="text-align: right;">n</th>
<th style="text-align: right;">h</th>
<th style="text-align: right;">prop</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td style="text-align: left;">Ty Blach</td>
<td style="text-align: right;">108</td>
<td style="text-align: right;">80</td>
<td style="text-align: right;">0.741</td>
</tr>
<tr class="even">
<td style="text-align: left;">Jordan Montgomery</td>
<td style="text-align: right;">189</td>
<td style="text-align: right;">138</td>
<td style="text-align: right;">0.730</td>
</tr>
<tr class="odd">
<td style="text-align: left;">Dakota Hudson</td>
<td style="text-align: right;">162</td>
<td style="text-align: right;">116</td>
<td style="text-align: right;">0.716</td>
</tr>
<tr class="even">
<td style="text-align: left;">Trevor Rogers</td>
<td style="text-align: right;">225</td>
<td style="text-align: right;">159</td>
<td style="text-align: right;">0.707</td>
</tr>
<tr class="odd">
<td style="text-align: left;">Kyle Hendricks</td>
<td style="text-align: right;">218</td>
<td style="text-align: right;">154</td>
<td style="text-align: right;">0.706</td>
</tr>
<tr class="even">
<td style="text-align: left;">Valente Bellozo</td>
<td style="text-align: right;">117</td>
<td style="text-align: right;">82</td>
<td style="text-align: right;">0.701</td>
</tr>
<tr class="odd">
<td style="text-align: left;">Taijuan Walker</td>
<td style="text-align: right;">136</td>
<td style="text-align: right;">95</td>
<td style="text-align: right;">0.699</td>
</tr>
<tr class="even">
<td style="text-align: left;">Patrick Corbin</td>
<td style="text-align: right;">288</td>
<td style="text-align: right;">201</td>
<td style="text-align: right;">0.698</td>
</tr>
<tr class="odd">
<td style="text-align: left;">Cal Quantrill</td>
<td style="text-align: right;">261</td>
<td style="text-align: right;">182</td>
<td style="text-align: right;">0.697</td>
</tr>
<tr class="even">
<td style="text-align: left;">Graham Ashcraft</td>
<td style="text-align: right;">135</td>
<td style="text-align: right;">94</td>
<td style="text-align: right;">0.696</td>
</tr>
</tbody>
</table>
</div>
<div class="quarto-layout-cell" style="flex-basis: 33.3%;justify-content: center;">
<table class="caption-top table table-sm table-striped small">
<caption>Parks</caption>
<thead>
<tr class="header">
<th style="text-align: left;">park</th>
<th style="text-align: right;">n</th>
<th style="text-align: right;">h</th>
<th style="text-align: right;">prop</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td style="text-align: left;">COL</td>
<td style="text-align: right;">1458</td>
<td style="text-align: right;">1013</td>
<td style="text-align: right;">0.695</td>
</tr>
<tr class="even">
<td style="text-align: left;">MIA</td>
<td style="text-align: right;">1458</td>
<td style="text-align: right;">972</td>
<td style="text-align: right;">0.667</td>
</tr>
<tr class="odd">
<td style="text-align: left;">ARI</td>
<td style="text-align: right;">1458</td>
<td style="text-align: right;">954</td>
<td style="text-align: right;">0.654</td>
</tr>
<tr class="even">
<td style="text-align: left;">BOS</td>
<td style="text-align: right;">1458</td>
<td style="text-align: right;">944</td>
<td style="text-align: right;">0.647</td>
</tr>
<tr class="odd">
<td style="text-align: left;">BAL</td>
<td style="text-align: right;">1458</td>
<td style="text-align: right;">929</td>
<td style="text-align: right;">0.637</td>
</tr>
<tr class="even">
<td style="text-align: left;">KCA</td>
<td style="text-align: right;">1458</td>
<td style="text-align: right;">928</td>
<td style="text-align: right;">0.636</td>
</tr>
<tr class="odd">
<td style="text-align: left;">PHI</td>
<td style="text-align: right;">1458</td>
<td style="text-align: right;">921</td>
<td style="text-align: right;">0.632</td>
</tr>
<tr class="even">
<td style="text-align: left;">MIN</td>
<td style="text-align: right;">1458</td>
<td style="text-align: right;">914</td>
<td style="text-align: right;">0.627</td>
</tr>
<tr class="odd">
<td style="text-align: left;">ATL</td>
<td style="text-align: right;">1458</td>
<td style="text-align: right;">911</td>
<td style="text-align: right;">0.625</td>
</tr>
<tr class="even">
<td style="text-align: left;">WAS</td>
<td style="text-align: right;">1458</td>
<td style="text-align: right;">908</td>
<td style="text-align: right;">0.623</td>
</tr>
</tbody>
</table>
</div>
</div>
</div>
<p>If you ever see <a href="https://www.baseball-reference.com/players/g/garvemi01.shtml">Mitch Garver</a> against <a href="https://www.baseball-reference.com/players/s/snellbl01.shtml">Blake Snell</a> at <a href="https://www.baseball-reference.com/bullpen/T-Mobile_Park">T-Mobile Park</a>, there will likely be some better options.</p>
<div>

</div>
<div class="cell quarto-layout-panel" data-layout-ncol="3">
<div class="quarto-layout-row">
<div class="quarto-layout-cell" style="flex-basis: 33.3%;justify-content: center;">
<table class="caption-top table table-sm table-striped small">
<caption>Batters</caption>
<thead>
<tr class="header">
<th style="text-align: left;">batter</th>
<th style="text-align: right;">n</th>
<th style="text-align: right;">h</th>
<th style="text-align: right;">prop</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td style="text-align: left;">Mitch Garver</td>
<td style="text-align: right;">104</td>
<td style="text-align: right;">45</td>
<td style="text-align: right;">0.433</td>
</tr>
<tr class="even">
<td style="text-align: left;">Will Benson</td>
<td style="text-align: right;">103</td>
<td style="text-align: right;">49</td>
<td style="text-align: right;">0.476</td>
</tr>
<tr class="odd">
<td style="text-align: left;">Dylan Moore</td>
<td style="text-align: right;">109</td>
<td style="text-align: right;">52</td>
<td style="text-align: right;">0.477</td>
</tr>
<tr class="even">
<td style="text-align: left;">Brayan Rocchio</td>
<td style="text-align: right;">121</td>
<td style="text-align: right;">59</td>
<td style="text-align: right;">0.488</td>
</tr>
<tr class="odd">
<td style="text-align: left;">José Siri</td>
<td style="text-align: right;">116</td>
<td style="text-align: right;">57</td>
<td style="text-align: right;">0.491</td>
</tr>
<tr class="even">
<td style="text-align: left;">Bo Naylor</td>
<td style="text-align: right;">105</td>
<td style="text-align: right;">52</td>
<td style="text-align: right;">0.495</td>
</tr>
<tr class="odd">
<td style="text-align: left;">Davis Schneider</td>
<td style="text-align: right;">107</td>
<td style="text-align: right;">53</td>
<td style="text-align: right;">0.495</td>
</tr>
<tr class="even">
<td style="text-align: left;">Blake Perkins</td>
<td style="text-align: right;">104</td>
<td style="text-align: right;">53</td>
<td style="text-align: right;">0.510</td>
</tr>
<tr class="odd">
<td style="text-align: left;">Kyle Isbel</td>
<td style="text-align: right;">119</td>
<td style="text-align: right;">61</td>
<td style="text-align: right;">0.513</td>
</tr>
<tr class="even">
<td style="text-align: left;">Max Schuemann</td>
<td style="text-align: right;">119</td>
<td style="text-align: right;">61</td>
<td style="text-align: right;">0.513</td>
</tr>
</tbody>
</table>
</div>
<div class="quarto-layout-cell" style="flex-basis: 33.3%;justify-content: center;">
<table class="caption-top table table-sm table-striped small">
<caption>Pitchers</caption>
<thead>
<tr class="header">
<th style="text-align: left;">pitcher</th>
<th style="text-align: right;">n</th>
<th style="text-align: right;">h</th>
<th style="text-align: right;">prop</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td style="text-align: left;">Blake Snell</td>
<td style="text-align: right;">179</td>
<td style="text-align: right;">80</td>
<td style="text-align: right;">0.447</td>
</tr>
<tr class="even">
<td style="text-align: left;">Ronel Blanco</td>
<td style="text-align: right;">261</td>
<td style="text-align: right;">126</td>
<td style="text-align: right;">0.483</td>
</tr>
<tr class="odd">
<td style="text-align: left;">Bowden Francis</td>
<td style="text-align: right;">117</td>
<td style="text-align: right;">59</td>
<td style="text-align: right;">0.504</td>
</tr>
<tr class="even">
<td style="text-align: left;">Framber Valdez</td>
<td style="text-align: right;">252</td>
<td style="text-align: right;">127</td>
<td style="text-align: right;">0.504</td>
</tr>
<tr class="odd">
<td style="text-align: left;">Shane Baz</td>
<td style="text-align: right;">126</td>
<td style="text-align: right;">64</td>
<td style="text-align: right;">0.508</td>
</tr>
<tr class="even">
<td style="text-align: left;">Hunter Greene</td>
<td style="text-align: right;">234</td>
<td style="text-align: right;">120</td>
<td style="text-align: right;">0.513</td>
</tr>
<tr class="odd">
<td style="text-align: left;">Trevor Williams</td>
<td style="text-align: right;">117</td>
<td style="text-align: right;">60</td>
<td style="text-align: right;">0.513</td>
</tr>
<tr class="even">
<td style="text-align: left;">Tyler Glasnow</td>
<td style="text-align: right;">198</td>
<td style="text-align: right;">102</td>
<td style="text-align: right;">0.515</td>
</tr>
<tr class="odd">
<td style="text-align: left;">Cody Bradford</td>
<td style="text-align: right;">117</td>
<td style="text-align: right;">61</td>
<td style="text-align: right;">0.521</td>
</tr>
<tr class="even">
<td style="text-align: left;">Luis Gil</td>
<td style="text-align: right;">261</td>
<td style="text-align: right;">137</td>
<td style="text-align: right;">0.525</td>
</tr>
</tbody>
</table>
</div>
<div class="quarto-layout-cell" style="flex-basis: 33.3%;justify-content: center;">
<table class="caption-top table table-sm table-striped small">
<caption>Parks</caption>
<thead>
<tr class="header">
<th style="text-align: left;">park</th>
<th style="text-align: right;">n</th>
<th style="text-align: right;">h</th>
<th style="text-align: right;">prop</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td style="text-align: left;">SEA</td>
<td style="text-align: right;">1458</td>
<td style="text-align: right;">806</td>
<td style="text-align: right;">0.553</td>
</tr>
<tr class="even">
<td style="text-align: left;">NYN</td>
<td style="text-align: right;">1458</td>
<td style="text-align: right;">832</td>
<td style="text-align: right;">0.571</td>
</tr>
<tr class="odd">
<td style="text-align: left;">TEX</td>
<td style="text-align: right;">1458</td>
<td style="text-align: right;">843</td>
<td style="text-align: right;">0.578</td>
</tr>
<tr class="even">
<td style="text-align: left;">CHN</td>
<td style="text-align: right;">1458</td>
<td style="text-align: right;">847</td>
<td style="text-align: right;">0.581</td>
</tr>
<tr class="odd">
<td style="text-align: left;">DET</td>
<td style="text-align: right;">1458</td>
<td style="text-align: right;">847</td>
<td style="text-align: right;">0.581</td>
</tr>
<tr class="even">
<td style="text-align: left;">TBA</td>
<td style="text-align: right;">1458</td>
<td style="text-align: right;">855</td>
<td style="text-align: right;">0.586</td>
</tr>
<tr class="odd">
<td style="text-align: left;">MIL</td>
<td style="text-align: right;">1458</td>
<td style="text-align: right;">858</td>
<td style="text-align: right;">0.588</td>
</tr>
<tr class="even">
<td style="text-align: left;">ANA</td>
<td style="text-align: right;">1458</td>
<td style="text-align: right;">870</td>
<td style="text-align: right;">0.597</td>
</tr>
<tr class="odd">
<td style="text-align: left;">CLE</td>
<td style="text-align: right;">1440</td>
<td style="text-align: right;">859</td>
<td style="text-align: right;">0.597</td>
</tr>
<tr class="even">
<td style="text-align: left;">SFN</td>
<td style="text-align: right;">1458</td>
<td style="text-align: right;">874</td>
<td style="text-align: right;">0.599</td>
</tr>
</tbody>
</table>
</div>
</div>
</div>
</section>
<section id="modelling" class="level2">
<h2 class="anchored" data-anchor-id="modelling">Modelling</h2>
<p>It is clear that there are many factors that influence whether a batter obtains a hit in any particular game. To keep it simple, this binomial model will use the xBA of the batter and starting pitcher, the handedness of the batter and starting pitcher, and the park that the game was played in to produce a probability that the batter gets a hit. Since simulation will be done on the 2024 season, the model will use data from 2021 through 2023.</p>
<p>Some variables will have a greater impact than others, and this can be quantified by the estimate and p-values for each term. By far and away the most important variables are the xBA for the batter and pitcher, but every variable used in this model is significant.</p>
<p>A list of the franchise/team IDs can be found <a href="https://www.retrosheet.org/TEAMABR.TXT">here</a>.</p>
<div>

</div>
<div class="cell quarto-layout-panel" data-layout-ncol="3">
<div class="quarto-layout-row">
<div class="quarto-layout-cell" style="flex-basis: 33.3%;justify-content: center;">
<table class="caption-top table table-sm table-striped small">
<caption>Handedness</caption>
<thead>
<tr class="header">
<th style="text-align: left;">term</th>
<th style="text-align: right;">estimate</th>
<th style="text-align: right;">p.value</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td style="text-align: left;">(Intercept)</td>
<td style="text-align: right;">-2.869</td>
<td style="text-align: right;">0.000</td>
</tr>
<tr class="even">
<td style="text-align: left;">est_ba_bat</td>
<td style="text-align: right;">8.370</td>
<td style="text-align: right;">0.000</td>
</tr>
<tr class="odd">
<td style="text-align: left;">est_ba_pit</td>
<td style="text-align: right;">5.406</td>
<td style="text-align: right;">0.000</td>
</tr>
<tr class="even">
<td style="text-align: left;">hand_batL</td>
<td style="text-align: right;">-0.031</td>
<td style="text-align: right;">0.074</td>
</tr>
<tr class="odd">
<td style="text-align: left;">hand_pitL</td>
<td style="text-align: right;">0.044</td>
<td style="text-align: right;">0.027</td>
</tr>
<tr class="even">
<td style="text-align: left;">hand_batL:hand_pitL</td>
<td style="text-align: right;">-0.142</td>
<td style="text-align: right;">0.000</td>
</tr>
</tbody>
</table>
</div>
<div class="quarto-layout-cell" style="flex-basis: 33.3%;justify-content: center;">
<table class="caption-top table table-sm table-striped small">
<caption>Hitter Friendly Parks</caption>
<thead>
<tr class="header">
<th style="text-align: left;">term</th>
<th style="text-align: right;">estimate</th>
<th style="text-align: right;">p.value</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td style="text-align: left;">parkCOL</td>
<td style="text-align: right;">0.296</td>
<td style="text-align: right;">0.000</td>
</tr>
<tr class="even">
<td style="text-align: left;">parkBOS</td>
<td style="text-align: right;">0.182</td>
<td style="text-align: right;">0.002</td>
</tr>
<tr class="odd">
<td style="text-align: left;">parkKCA</td>
<td style="text-align: right;">0.136</td>
<td style="text-align: right;">0.022</td>
</tr>
<tr class="even">
<td style="text-align: left;">parkARI</td>
<td style="text-align: right;">0.109</td>
<td style="text-align: right;">0.066</td>
</tr>
<tr class="odd">
<td style="text-align: left;">parkMIA</td>
<td style="text-align: right;">0.103</td>
<td style="text-align: right;">0.088</td>
</tr>
<tr class="even">
<td style="text-align: left;">parkSFN</td>
<td style="text-align: right;">0.098</td>
<td style="text-align: right;">0.100</td>
</tr>
</tbody>
</table>
</div>
<div class="quarto-layout-cell" style="flex-basis: 33.3%;justify-content: center;">
<table class="caption-top table table-sm table-striped small">
<caption>Pitcher Friendly Parks</caption>
<thead>
<tr class="header">
<th style="text-align: left;">term</th>
<th style="text-align: right;">estimate</th>
<th style="text-align: right;">p.value</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td style="text-align: left;">parkTBA</td>
<td style="text-align: right;">-0.115</td>
<td style="text-align: right;">0.046</td>
</tr>
<tr class="even">
<td style="text-align: left;">parkSEA</td>
<td style="text-align: right;">-0.097</td>
<td style="text-align: right;">0.092</td>
</tr>
<tr class="odd">
<td style="text-align: left;">parkNYA</td>
<td style="text-align: right;">-0.091</td>
<td style="text-align: right;">0.108</td>
</tr>
<tr class="even">
<td style="text-align: left;">parkLAN</td>
<td style="text-align: right;">-0.079</td>
<td style="text-align: right;">0.169</td>
</tr>
<tr class="odd">
<td style="text-align: left;">parkCLE</td>
<td style="text-align: right;">-0.069</td>
<td style="text-align: right;">0.236</td>
</tr>
<tr class="even">
<td style="text-align: left;">parkNYN</td>
<td style="text-align: right;">-0.067</td>
<td style="text-align: right;">0.248</td>
</tr>
</tbody>
</table>
</div>
</div>
</div>
<p>In the five matchups most likely to result in a hit, <a href="https://www.baseball-reference.com/players/a/acunaro01.shtml">Ronald Acuña Jr.</a> was the batter for each of them. The model predicts that these selections had almost a 90% chance of resulting in a hit.</p>
<div class="cell">
<div class="cell-output-display">
<table class="caption-top table table-sm table-striped small">
<colgroup>
<col style="width: 10%">
<col style="width: 4%">
<col style="width: 12%">
<col style="width: 8%">
<col style="width: 10%">
<col style="width: 15%">
<col style="width: 8%">
<col style="width: 10%">
<col style="width: 5%">
<col style="width: 4%">
<col style="width: 5%">
</colgroup>
<thead>
<tr class="header">
<th style="text-align: left;">date</th>
<th style="text-align: left;">park</th>
<th style="text-align: left;">batter</th>
<th style="text-align: left;">hand_bat</th>
<th style="text-align: right;">est_ba_bat</th>
<th style="text-align: left;">pitcher</th>
<th style="text-align: left;">hand_pit</th>
<th style="text-align: right;">est_ba_pit</th>
<th style="text-align: left;">pass</th>
<th style="text-align: left;">h_fl</th>
<th style="text-align: right;">prob</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td style="text-align: left;">2023-08-30</td>
<td style="text-align: left;">COL</td>
<td style="text-align: left;">Ronald Acuña</td>
<td style="text-align: left;">R</td>
<td style="text-align: right;">0.357</td>
<td style="text-align: left;">Kyle Freeland</td>
<td style="text-align: left;">L</td>
<td style="text-align: right;">0.294</td>
<td style="text-align: left;">FALSE</td>
<td style="text-align: left;">TRUE</td>
<td style="text-align: right;">0.886</td>
</tr>
<tr class="even">
<td style="text-align: left;">2023-08-28</td>
<td style="text-align: left;">COL</td>
<td style="text-align: left;">Ronald Acuña</td>
<td style="text-align: left;">R</td>
<td style="text-align: right;">0.357</td>
<td style="text-align: left;">Austin Gomber</td>
<td style="text-align: left;">L</td>
<td style="text-align: right;">0.292</td>
<td style="text-align: left;">FALSE</td>
<td style="text-align: left;">TRUE</td>
<td style="text-align: right;">0.885</td>
</tr>
<tr class="odd">
<td style="text-align: left;">2023-03-30</td>
<td style="text-align: left;">WAS</td>
<td style="text-align: left;">Ronald Acuña</td>
<td style="text-align: left;">R</td>
<td style="text-align: right;">0.357</td>
<td style="text-align: left;">Patrick Corbin</td>
<td style="text-align: left;">L</td>
<td style="text-align: right;">0.303</td>
<td style="text-align: left;">FALSE</td>
<td style="text-align: left;">TRUE</td>
<td style="text-align: right;">0.869</td>
</tr>
<tr class="even">
<td style="text-align: left;">2023-09-22</td>
<td style="text-align: left;">WAS</td>
<td style="text-align: left;">Ronald Acuña</td>
<td style="text-align: left;">R</td>
<td style="text-align: right;">0.357</td>
<td style="text-align: left;">Patrick Corbin</td>
<td style="text-align: left;">L</td>
<td style="text-align: right;">0.303</td>
<td style="text-align: left;">FALSE</td>
<td style="text-align: left;">TRUE</td>
<td style="text-align: right;">0.869</td>
</tr>
<tr class="odd">
<td style="text-align: left;">2023-09-07</td>
<td style="text-align: left;">ATL</td>
<td style="text-align: left;">Ronald Acuña</td>
<td style="text-align: left;">R</td>
<td style="text-align: right;">0.357</td>
<td style="text-align: left;">Adam Wainwright</td>
<td style="text-align: left;">R</td>
<td style="text-align: right;">0.325</td>
<td style="text-align: left;">FALSE</td>
<td style="text-align: left;">TRUE</td>
<td style="text-align: right;">0.868</td>
</tr>
</tbody>
</table>
</div>
</div>
<p>Conversely, the least likely selections are headlined by <a href="https://www.baseball-reference.com/players/j/javiecr01.shtml">Cristian Javier</a>, <a href="https://www.baseball-reference.com/players/m/mcclash01.shtml">Shane McClanahan</a>, and <a href="https://www.baseball-reference.com/players/d/degroja01.shtml">Jacob deGrom</a>. The probability of a hit can fall as low as 33.5% for these selections.</p>
<div class="cell">
<div class="cell-output-display">
<table class="caption-top table table-sm table-striped small">
<colgroup>
<col style="width: 11%">
<col style="width: 5%">
<col style="width: 15%">
<col style="width: 9%">
<col style="width: 11%">
<col style="width: 17%">
<col style="width: 9%">
<col style="width: 11%">
<col style="width: 6%">
<col style="width: 6%">
</colgroup>
<thead>
<tr class="header">
<th style="text-align: left;">date</th>
<th style="text-align: left;">park</th>
<th style="text-align: left;">batter</th>
<th style="text-align: left;">hand_bat</th>
<th style="text-align: right;">est_ba_bat</th>
<th style="text-align: left;">pitcher</th>
<th style="text-align: left;">hand_pit</th>
<th style="text-align: right;">est_ba_pit</th>
<th style="text-align: left;">h_fl</th>
<th style="text-align: right;">prob</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td style="text-align: left;">2022-06-25</td>
<td style="text-align: left;">NYA</td>
<td style="text-align: left;">Joey Gallo</td>
<td style="text-align: left;">L</td>
<td style="text-align: right;">0.167</td>
<td style="text-align: left;">Cristian Javier</td>
<td style="text-align: left;">R</td>
<td style="text-align: right;">0.168</td>
<td style="text-align: left;">FALSE</td>
<td style="text-align: right;">0.335</td>
</tr>
<tr class="even">
<td style="text-align: left;">2022-05-29</td>
<td style="text-align: left;">TBA</td>
<td style="text-align: left;">Joey Gallo</td>
<td style="text-align: left;">L</td>
<td style="text-align: right;">0.167</td>
<td style="text-align: left;">Shane McClanahan</td>
<td style="text-align: left;">L</td>
<td style="text-align: right;">0.207</td>
<td style="text-align: left;">FALSE</td>
<td style="text-align: right;">0.355</td>
</tr>
<tr class="odd">
<td style="text-align: left;">2022-08-31</td>
<td style="text-align: left;">NYN</td>
<td style="text-align: left;">Joey Gallo</td>
<td style="text-align: left;">L</td>
<td style="text-align: right;">0.167</td>
<td style="text-align: left;">Jacob deGrom</td>
<td style="text-align: left;">R</td>
<td style="text-align: right;">0.182</td>
<td style="text-align: left;">FALSE</td>
<td style="text-align: right;">0.358</td>
</tr>
<tr class="even">
<td style="text-align: left;">2022-07-21</td>
<td style="text-align: left;">HOU</td>
<td style="text-align: left;">Joey Gallo</td>
<td style="text-align: left;">L</td>
<td style="text-align: right;">0.167</td>
<td style="text-align: left;">Cristian Javier</td>
<td style="text-align: left;">R</td>
<td style="text-align: right;">0.168</td>
<td style="text-align: left;">FALSE</td>
<td style="text-align: right;">0.361</td>
</tr>
<tr class="odd">
<td style="text-align: left;">2021-07-07</td>
<td style="text-align: left;">NYN</td>
<td style="text-align: left;">Jackie Bradley</td>
<td style="text-align: left;">L</td>
<td style="text-align: right;">0.194</td>
<td style="text-align: left;">Jacob deGrom</td>
<td style="text-align: left;">R</td>
<td style="text-align: right;">0.145</td>
<td style="text-align: left;">FALSE</td>
<td style="text-align: right;">0.364</td>
</tr>
</tbody>
</table>
</div>
</div>
<p>If all the advice above is ignored, and purely random selections are made, the first five days of selections for the 2024 season could look something like this.</p>
<div class="cell">
<div class="cell-output-display">
<table class="caption-top table table-sm table-striped small">
<colgroup>
<col style="width: 11%">
<col style="width: 5%">
<col style="width: 15%">
<col style="width: 9%">
<col style="width: 11%">
<col style="width: 15%">
<col style="width: 9%">
<col style="width: 11%">
<col style="width: 5%">
<col style="width: 6%">
</colgroup>
<thead>
<tr class="header">
<th style="text-align: left;">date</th>
<th style="text-align: left;">park</th>
<th style="text-align: left;">batter</th>
<th style="text-align: left;">hand_bat</th>
<th style="text-align: right;">est_ba_bat</th>
<th style="text-align: left;">pitcher</th>
<th style="text-align: left;">hand_pit</th>
<th style="text-align: right;">est_ba_pit</th>
<th style="text-align: left;">h_fl</th>
<th style="text-align: right;">prob</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td style="text-align: left;">2024-03-28</td>
<td style="text-align: left;">TBA</td>
<td style="text-align: left;">José Siri</td>
<td style="text-align: left;">R</td>
<td style="text-align: right;">0.200</td>
<td style="text-align: left;">José Berríos</td>
<td style="text-align: left;">R</td>
<td style="text-align: right;">0.265</td>
<td style="text-align: left;">TRUE</td>
<td style="text-align: right;">0.531</td>
</tr>
<tr class="even">
<td style="text-align: left;">2024-03-29</td>
<td style="text-align: left;">PHI</td>
<td style="text-align: left;">Jarred Kelenic</td>
<td style="text-align: left;">L</td>
<td style="text-align: right;">0.241</td>
<td style="text-align: left;">Zack Wheeler</td>
<td style="text-align: left;">R</td>
<td style="text-align: right;">0.197</td>
<td style="text-align: left;">TRUE</td>
<td style="text-align: right;">0.554</td>
</tr>
<tr class="odd">
<td style="text-align: left;">2024-03-30</td>
<td style="text-align: left;">CHA</td>
<td style="text-align: left;">Riley Greene</td>
<td style="text-align: left;">L</td>
<td style="text-align: right;">0.253</td>
<td style="text-align: left;">Michael Soroka</td>
<td style="text-align: left;">R</td>
<td style="text-align: right;">0.237</td>
<td style="text-align: left;">TRUE</td>
<td style="text-align: right;">0.642</td>
</tr>
<tr class="even">
<td style="text-align: left;">2024-03-31</td>
<td style="text-align: left;">CIN</td>
<td style="text-align: left;">Spencer Steer</td>
<td style="text-align: left;">R</td>
<td style="text-align: right;">0.235</td>
<td style="text-align: left;">Jake Irvin</td>
<td style="text-align: left;">R</td>
<td style="text-align: right;">0.253</td>
<td style="text-align: left;">TRUE</td>
<td style="text-align: right;">0.634</td>
</tr>
<tr class="odd">
<td style="text-align: left;">2024-04-01</td>
<td style="text-align: left;">CHN</td>
<td style="text-align: left;">Cody Bellinger</td>
<td style="text-align: left;">L</td>
<td style="text-align: right;">0.242</td>
<td style="text-align: left;">Dakota Hudson</td>
<td style="text-align: left;">R</td>
<td style="text-align: right;">0.291</td>
<td style="text-align: left;">TRUE</td>
<td style="text-align: right;">0.675</td>
</tr>
</tbody>
</table>
</div>
</div>
<p>The streaks for these selections can be visualized using a stairstep plot. This selection method is clearly not very good, since the highest streak for the season is only 11.</p>
<div class="cell">
<div class="cell-output-display">
<div id="fig-step-random" class="quarto-float quarto-figure quarto-figure-center anchored">
<figure class="quarto-float quarto-float-fig figure">
<div aria-describedby="fig-step-random-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca">
<img src="beating_the_streak_files/figure-html/fig-step-random-1.png" class="img-fluid figure-img" style="width:100.0%">
</div>
<figcaption class="quarto-float-caption-bottom quarto-float-caption quarto-float-fig" id="fig-step-random-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca">
Figure&nbsp;1: Stairstep plot of the current streak for a set of random selections over the course of the 2024 season.
</figcaption>
</figure>
</div>
</div>
</div>
<p>This is the “best” set of selections that results in a record 57 hit-streak. In the dream scenario where someone made these selections, taking the product of the probabilities gives an estimate for the chance that they all resulted in a hit of 1 in 1,410,600.</p>
<div class="cell">
<div class="cell-output-display">
<table class="caption-top table table-sm table-striped small">
<colgroup>
<col style="width: 10%">
<col style="width: 4%">
<col style="width: 17%">
<col style="width: 8%">
<col style="width: 10%">
<col style="width: 18%">
<col style="width: 8%">
<col style="width: 10%">
<col style="width: 4%">
<col style="width: 5%">
</colgroup>
<thead>
<tr class="header">
<th style="text-align: left;">date</th>
<th style="text-align: left;">park</th>
<th style="text-align: left;">batter</th>
<th style="text-align: left;">hand_bat</th>
<th style="text-align: right;">est_ba_bat</th>
<th style="text-align: left;">pitcher</th>
<th style="text-align: left;">hand_pit</th>
<th style="text-align: right;">est_ba_pit</th>
<th style="text-align: left;">h_fl</th>
<th style="text-align: right;">prob</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td style="text-align: left;">2024-06-08</td>
<td style="text-align: left;">KCA</td>
<td style="text-align: left;">Bobby Witt Jr.</td>
<td style="text-align: left;">R</td>
<td style="text-align: right;">0.315</td>
<td style="text-align: left;">Luis Castillo</td>
<td style="text-align: left;">R</td>
<td style="text-align: right;">0.244</td>
<td style="text-align: left;">TRUE</td>
<td style="text-align: right;">0.772</td>
</tr>
<tr class="even">
<td style="text-align: left;">2024-06-08</td>
<td style="text-align: left;">SDN</td>
<td style="text-align: left;">Luis Arráez</td>
<td style="text-align: left;">L</td>
<td style="text-align: right;">0.310</td>
<td style="text-align: left;">Ryne Nelson</td>
<td style="text-align: left;">R</td>
<td style="text-align: right;">0.267</td>
<td style="text-align: left;">TRUE</td>
<td style="text-align: right;">0.749</td>
</tr>
<tr class="odd">
<td style="text-align: left;">2024-06-09</td>
<td style="text-align: left;">KCA</td>
<td style="text-align: left;">Bobby Witt Jr.</td>
<td style="text-align: left;">R</td>
<td style="text-align: right;">0.315</td>
<td style="text-align: left;">George Kirby</td>
<td style="text-align: left;">R</td>
<td style="text-align: right;">0.236</td>
<td style="text-align: left;">TRUE</td>
<td style="text-align: right;">0.765</td>
</tr>
<tr class="even">
<td style="text-align: left;">2024-06-09</td>
<td style="text-align: left;">OAK</td>
<td style="text-align: left;">Vladimir Guerrero</td>
<td style="text-align: left;">R</td>
<td style="text-align: right;">0.321</td>
<td style="text-align: left;">Mitch Spence</td>
<td style="text-align: left;">R</td>
<td style="text-align: right;">0.251</td>
<td style="text-align: left;">TRUE</td>
<td style="text-align: right;">0.756</td>
</tr>
<tr class="odd">
<td style="text-align: left;">2024-06-10</td>
<td style="text-align: left;">KCA</td>
<td style="text-align: left;">Juan Soto</td>
<td style="text-align: left;">L</td>
<td style="text-align: right;">0.316</td>
<td style="text-align: left;">Seth Lugo</td>
<td style="text-align: left;">R</td>
<td style="text-align: right;">0.243</td>
<td style="text-align: left;">TRUE</td>
<td style="text-align: right;">0.767</td>
</tr>
<tr class="even">
<td style="text-align: left;">2024-06-10</td>
<td style="text-align: left;">KCA</td>
<td style="text-align: left;">Bobby Witt Jr.</td>
<td style="text-align: left;">R</td>
<td style="text-align: right;">0.315</td>
<td style="text-align: left;">Carlos Rodón</td>
<td style="text-align: left;">L</td>
<td style="text-align: right;">0.227</td>
<td style="text-align: left;">TRUE</td>
<td style="text-align: right;">0.764</td>
</tr>
<tr class="odd">
<td style="text-align: left;">2024-06-11</td>
<td style="text-align: left;">KCA</td>
<td style="text-align: left;">Bobby Witt Jr.</td>
<td style="text-align: left;">R</td>
<td style="text-align: right;">0.315</td>
<td style="text-align: left;">Marcus Stroman</td>
<td style="text-align: left;">R</td>
<td style="text-align: right;">0.271</td>
<td style="text-align: left;">TRUE</td>
<td style="text-align: right;">0.797</td>
</tr>
<tr class="even">
<td style="text-align: left;">2024-06-11</td>
<td style="text-align: left;">KCA</td>
<td style="text-align: left;">Aaron Judge</td>
<td style="text-align: left;">R</td>
<td style="text-align: right;">0.310</td>
<td style="text-align: left;">Brady Singer</td>
<td style="text-align: left;">R</td>
<td style="text-align: right;">0.267</td>
<td style="text-align: left;">TRUE</td>
<td style="text-align: right;">0.787</td>
</tr>
<tr class="odd">
<td style="text-align: left;">2024-06-12</td>
<td style="text-align: left;">SFN</td>
<td style="text-align: left;">Yordan Álvarez</td>
<td style="text-align: left;">L</td>
<td style="text-align: right;">0.303</td>
<td style="text-align: left;">Logan Webb</td>
<td style="text-align: left;">R</td>
<td style="text-align: right;">0.272</td>
<td style="text-align: left;">TRUE</td>
<td style="text-align: right;">0.769</td>
</tr>
<tr class="even">
<td style="text-align: left;">2024-06-12</td>
<td style="text-align: left;">LAN</td>
<td style="text-align: left;">Shohei Ohtani</td>
<td style="text-align: left;">L</td>
<td style="text-align: right;">0.314</td>
<td style="text-align: left;">Jon Gray</td>
<td style="text-align: left;">R</td>
<td style="text-align: right;">0.276</td>
<td style="text-align: left;">TRUE</td>
<td style="text-align: right;">0.758</td>
</tr>
<tr class="odd">
<td style="text-align: left;">2024-06-13</td>
<td style="text-align: left;">KCA</td>
<td style="text-align: left;">Juan Soto</td>
<td style="text-align: left;">L</td>
<td style="text-align: right;">0.316</td>
<td style="text-align: left;">Alec Marsh</td>
<td style="text-align: left;">R</td>
<td style="text-align: right;">0.264</td>
<td style="text-align: left;">TRUE</td>
<td style="text-align: right;">0.787</td>
</tr>
<tr class="even">
<td style="text-align: left;">2024-06-13</td>
<td style="text-align: left;">KCA</td>
<td style="text-align: left;">Bobby Witt Jr.</td>
<td style="text-align: left;">R</td>
<td style="text-align: right;">0.315</td>
<td style="text-align: left;">Néstor Cortés</td>
<td style="text-align: left;">L</td>
<td style="text-align: right;">0.236</td>
<td style="text-align: left;">TRUE</td>
<td style="text-align: right;">0.773</td>
</tr>
<tr class="odd">
<td style="text-align: left;">2024-06-14</td>
<td style="text-align: left;">BOS</td>
<td style="text-align: left;">Juan Soto</td>
<td style="text-align: left;">L</td>
<td style="text-align: right;">0.316</td>
<td style="text-align: left;">Brayan Bello</td>
<td style="text-align: left;">R</td>
<td style="text-align: right;">0.256</td>
<td style="text-align: left;">TRUE</td>
<td style="text-align: right;">0.788</td>
</tr>
<tr class="even">
<td style="text-align: left;">2024-06-14</td>
<td style="text-align: left;">BOS</td>
<td style="text-align: left;">Aaron Judge</td>
<td style="text-align: left;">R</td>
<td style="text-align: right;">0.310</td>
<td style="text-align: left;">Brayan Bello</td>
<td style="text-align: left;">R</td>
<td style="text-align: right;">0.256</td>
<td style="text-align: left;">TRUE</td>
<td style="text-align: right;">0.784</td>
</tr>
<tr class="odd">
<td style="text-align: left;">2024-06-15</td>
<td style="text-align: left;">COL</td>
<td style="text-align: left;">Bryan Reynolds</td>
<td style="text-align: left;">R</td>
<td style="text-align: right;">0.270</td>
<td style="text-align: left;">Ty Blach</td>
<td style="text-align: left;">L</td>
<td style="text-align: right;">0.317</td>
<td style="text-align: left;">TRUE</td>
<td style="text-align: right;">0.809</td>
</tr>
<tr class="even">
<td style="text-align: left;">2024-06-15</td>
<td style="text-align: left;">COL</td>
<td style="text-align: left;">Nick Gonzales</td>
<td style="text-align: left;">R</td>
<td style="text-align: right;">0.270</td>
<td style="text-align: left;">Ty Blach</td>
<td style="text-align: left;">L</td>
<td style="text-align: right;">0.317</td>
<td style="text-align: left;">TRUE</td>
<td style="text-align: right;">0.809</td>
</tr>
<tr class="odd">
<td style="text-align: left;">2024-06-16</td>
<td style="text-align: left;">COL</td>
<td style="text-align: left;">Nick Gonzales</td>
<td style="text-align: left;">R</td>
<td style="text-align: right;">0.270</td>
<td style="text-align: left;">Dakota Hudson</td>
<td style="text-align: left;">R</td>
<td style="text-align: right;">0.291</td>
<td style="text-align: left;">TRUE</td>
<td style="text-align: right;">0.779</td>
</tr>
<tr class="even">
<td style="text-align: left;">2024-06-16</td>
<td style="text-align: left;">COL</td>
<td style="text-align: left;">Bryan Reynolds</td>
<td style="text-align: left;">L</td>
<td style="text-align: right;">0.270</td>
<td style="text-align: left;">Dakota Hudson</td>
<td style="text-align: left;">R</td>
<td style="text-align: right;">0.291</td>
<td style="text-align: left;">TRUE</td>
<td style="text-align: right;">0.774</td>
</tr>
<tr class="odd">
<td style="text-align: left;">2024-06-17</td>
<td style="text-align: left;">COL</td>
<td style="text-align: left;">Shohei Ohtani</td>
<td style="text-align: left;">L</td>
<td style="text-align: right;">0.314</td>
<td style="text-align: left;">Cal Quantrill</td>
<td style="text-align: left;">R</td>
<td style="text-align: right;">0.274</td>
<td style="text-align: left;">TRUE</td>
<td style="text-align: right;">0.818</td>
</tr>
<tr class="even">
<td style="text-align: left;">2024-06-17</td>
<td style="text-align: left;">PHI</td>
<td style="text-align: left;">Alec Bohm</td>
<td style="text-align: left;">R</td>
<td style="text-align: right;">0.288</td>
<td style="text-align: left;">Randy Vásquez</td>
<td style="text-align: left;">R</td>
<td style="text-align: right;">0.306</td>
<td style="text-align: left;">TRUE</td>
<td style="text-align: right;">0.774</td>
</tr>
<tr class="odd">
<td style="text-align: left;">2024-06-18</td>
<td style="text-align: left;">COL</td>
<td style="text-align: left;">Shohei Ohtani</td>
<td style="text-align: left;">L</td>
<td style="text-align: right;">0.314</td>
<td style="text-align: left;">Austin Gomber</td>
<td style="text-align: left;">L</td>
<td style="text-align: right;">0.278</td>
<td style="text-align: left;">TRUE</td>
<td style="text-align: right;">0.807</td>
</tr>
<tr class="even">
<td style="text-align: left;">2024-06-18</td>
<td style="text-align: left;">ATL</td>
<td style="text-align: left;">Marcell Ozuna</td>
<td style="text-align: left;">R</td>
<td style="text-align: right;">0.286</td>
<td style="text-align: left;">Casey Mize</td>
<td style="text-align: left;">R</td>
<td style="text-align: right;">0.286</td>
<td style="text-align: left;">TRUE</td>
<td style="text-align: right;">0.747</td>
</tr>
<tr class="odd">
<td style="text-align: left;">2024-06-19</td>
<td style="text-align: left;">COL</td>
<td style="text-align: left;">Shohei Ohtani</td>
<td style="text-align: left;">L</td>
<td style="text-align: right;">0.314</td>
<td style="text-align: left;">Ryan Feltner</td>
<td style="text-align: left;">R</td>
<td style="text-align: right;">0.255</td>
<td style="text-align: left;">TRUE</td>
<td style="text-align: right;">0.802</td>
</tr>
<tr class="even">
<td style="text-align: left;">2024-06-19</td>
<td style="text-align: left;">TOR</td>
<td style="text-align: left;">Vladimir Guerrero</td>
<td style="text-align: left;">R</td>
<td style="text-align: right;">0.321</td>
<td style="text-align: left;">Brayan Bello</td>
<td style="text-align: left;">R</td>
<td style="text-align: right;">0.256</td>
<td style="text-align: left;">TRUE</td>
<td style="text-align: right;">0.762</td>
</tr>
<tr class="odd">
<td style="text-align: left;">2024-06-20</td>
<td style="text-align: left;">COL</td>
<td style="text-align: left;">Shohei Ohtani</td>
<td style="text-align: left;">L</td>
<td style="text-align: right;">0.314</td>
<td style="text-align: left;">Ty Blach</td>
<td style="text-align: left;">L</td>
<td style="text-align: right;">0.317</td>
<td style="text-align: left;">TRUE</td>
<td style="text-align: right;">0.837</td>
</tr>
<tr class="even">
<td style="text-align: left;">2024-06-20</td>
<td style="text-align: left;">COL</td>
<td style="text-align: left;">Freddie Freeman</td>
<td style="text-align: left;">L</td>
<td style="text-align: right;">0.278</td>
<td style="text-align: left;">Ty Blach</td>
<td style="text-align: left;">L</td>
<td style="text-align: right;">0.317</td>
<td style="text-align: left;">TRUE</td>
<td style="text-align: right;">0.792</td>
</tr>
<tr class="odd">
<td style="text-align: left;">2024-06-21</td>
<td style="text-align: left;">COL</td>
<td style="text-align: left;">Luis García</td>
<td style="text-align: left;">L</td>
<td style="text-align: right;">0.278</td>
<td style="text-align: left;">Dakota Hudson</td>
<td style="text-align: left;">R</td>
<td style="text-align: right;">0.291</td>
<td style="text-align: left;">TRUE</td>
<td style="text-align: right;">0.785</td>
</tr>
<tr class="even">
<td style="text-align: left;">2024-06-21</td>
<td style="text-align: left;">CLE</td>
<td style="text-align: left;">Vladimir Guerrero</td>
<td style="text-align: left;">R</td>
<td style="text-align: right;">0.321</td>
<td style="text-align: left;">Carlos Carrasco</td>
<td style="text-align: left;">R</td>
<td style="text-align: right;">0.260</td>
<td style="text-align: left;">TRUE</td>
<td style="text-align: right;">0.760</td>
</tr>
<tr class="odd">
<td style="text-align: left;">2024-06-22</td>
<td style="text-align: left;">COL</td>
<td style="text-align: left;">Luis García</td>
<td style="text-align: left;">L</td>
<td style="text-align: right;">0.278</td>
<td style="text-align: left;">Cal Quantrill</td>
<td style="text-align: left;">R</td>
<td style="text-align: right;">0.274</td>
<td style="text-align: left;">TRUE</td>
<td style="text-align: right;">0.769</td>
</tr>
<tr class="even">
<td style="text-align: left;">2024-06-22</td>
<td style="text-align: left;">COL</td>
<td style="text-align: left;">Jacob Young</td>
<td style="text-align: left;">R</td>
<td style="text-align: right;">0.253</td>
<td style="text-align: left;">Cal Quantrill</td>
<td style="text-align: left;">R</td>
<td style="text-align: right;">0.274</td>
<td style="text-align: left;">TRUE</td>
<td style="text-align: right;">0.736</td>
</tr>
<tr class="odd">
<td style="text-align: left;">2024-06-23</td>
<td style="text-align: left;">COL</td>
<td style="text-align: left;">Jacob Young</td>
<td style="text-align: left;">R</td>
<td style="text-align: right;">0.253</td>
<td style="text-align: left;">Kyle Freeland</td>
<td style="text-align: left;">L</td>
<td style="text-align: right;">0.279</td>
<td style="text-align: left;">TRUE</td>
<td style="text-align: right;">0.750</td>
</tr>
<tr class="even">
<td style="text-align: left;">2024-06-23</td>
<td style="text-align: left;">PHI</td>
<td style="text-align: left;">Ketel Marte</td>
<td style="text-align: left;">R</td>
<td style="text-align: right;">0.294</td>
<td style="text-align: left;">Cristopher Sánchez</td>
<td style="text-align: left;">L</td>
<td style="text-align: right;">0.258</td>
<td style="text-align: left;">TRUE</td>
<td style="text-align: right;">0.744</td>
</tr>
<tr class="odd">
<td style="text-align: left;">2024-06-24</td>
<td style="text-align: left;">KCA</td>
<td style="text-align: left;">Bobby Witt Jr.</td>
<td style="text-align: left;">R</td>
<td style="text-align: right;">0.315</td>
<td style="text-align: left;">Roddery Muñoz</td>
<td style="text-align: left;">R</td>
<td style="text-align: right;">0.279</td>
<td style="text-align: left;">TRUE</td>
<td style="text-align: right;">0.804</td>
</tr>
<tr class="even">
<td style="text-align: left;">2024-06-24</td>
<td style="text-align: left;">BOS</td>
<td style="text-align: left;">Vladimir Guerrero</td>
<td style="text-align: left;">R</td>
<td style="text-align: right;">0.321</td>
<td style="text-align: left;">Tanner Houck</td>
<td style="text-align: left;">R</td>
<td style="text-align: right;">0.257</td>
<td style="text-align: left;">TRUE</td>
<td style="text-align: right;">0.800</td>
</tr>
<tr class="odd">
<td style="text-align: left;">2024-06-25</td>
<td style="text-align: left;">BOS</td>
<td style="text-align: left;">Vladimir Guerrero</td>
<td style="text-align: left;">R</td>
<td style="text-align: right;">0.321</td>
<td style="text-align: left;">Brayan Bello</td>
<td style="text-align: left;">R</td>
<td style="text-align: right;">0.256</td>
<td style="text-align: left;">TRUE</td>
<td style="text-align: right;">0.800</td>
</tr>
<tr class="even">
<td style="text-align: left;">2024-06-25</td>
<td style="text-align: left;">CHA</td>
<td style="text-align: left;">Shohei Ohtani</td>
<td style="text-align: left;">L</td>
<td style="text-align: right;">0.314</td>
<td style="text-align: left;">Chris Flexen</td>
<td style="text-align: left;">R</td>
<td style="text-align: right;">0.258</td>
<td style="text-align: left;">TRUE</td>
<td style="text-align: right;">0.770</td>
</tr>
<tr class="odd">
<td style="text-align: left;">2024-06-26</td>
<td style="text-align: left;">KCA</td>
<td style="text-align: left;">Bobby Witt Jr.</td>
<td style="text-align: left;">R</td>
<td style="text-align: right;">0.315</td>
<td style="text-align: left;">Valente Bellozo</td>
<td style="text-align: left;">R</td>
<td style="text-align: right;">0.250</td>
<td style="text-align: left;">TRUE</td>
<td style="text-align: right;">0.778</td>
</tr>
<tr class="even">
<td style="text-align: left;">2024-06-26</td>
<td style="text-align: left;">BOS</td>
<td style="text-align: left;">Vladimir Guerrero</td>
<td style="text-align: left;">R</td>
<td style="text-align: right;">0.321</td>
<td style="text-align: left;">Kutter Crawford</td>
<td style="text-align: left;">R</td>
<td style="text-align: right;">0.224</td>
<td style="text-align: left;">TRUE</td>
<td style="text-align: right;">0.770</td>
</tr>
<tr class="odd">
<td style="text-align: left;">2024-06-27</td>
<td style="text-align: left;">KCA</td>
<td style="text-align: left;">Bobby Witt Jr.</td>
<td style="text-align: left;">R</td>
<td style="text-align: right;">0.315</td>
<td style="text-align: left;">Ben Lively</td>
<td style="text-align: left;">R</td>
<td style="text-align: right;">0.240</td>
<td style="text-align: left;">TRUE</td>
<td style="text-align: right;">0.769</td>
</tr>
<tr class="even">
<td style="text-align: left;">2024-06-27</td>
<td style="text-align: left;">ARI</td>
<td style="text-align: left;">Carlos Correa</td>
<td style="text-align: left;">R</td>
<td style="text-align: right;">0.278</td>
<td style="text-align: left;">Jordan Montgomery</td>
<td style="text-align: left;">L</td>
<td style="text-align: right;">0.287</td>
<td style="text-align: left;">TRUE</td>
<td style="text-align: right;">0.762</td>
</tr>
<tr class="odd">
<td style="text-align: left;">2024-06-28</td>
<td style="text-align: left;">SFN</td>
<td style="text-align: left;">Shohei Ohtani</td>
<td style="text-align: left;">L</td>
<td style="text-align: right;">0.314</td>
<td style="text-align: left;">Logan Webb</td>
<td style="text-align: left;">R</td>
<td style="text-align: right;">0.272</td>
<td style="text-align: left;">TRUE</td>
<td style="text-align: right;">0.785</td>
</tr>
<tr class="even">
<td style="text-align: left;">2024-06-28</td>
<td style="text-align: left;">TOR</td>
<td style="text-align: left;">Vladimir Guerrero</td>
<td style="text-align: left;">R</td>
<td style="text-align: right;">0.321</td>
<td style="text-align: left;">Marcus Stroman</td>
<td style="text-align: left;">R</td>
<td style="text-align: right;">0.271</td>
<td style="text-align: left;">TRUE</td>
<td style="text-align: right;">0.776</td>
</tr>
<tr class="odd">
<td style="text-align: left;">2024-06-29</td>
<td style="text-align: left;">BOS</td>
<td style="text-align: left;">Luis Arráez</td>
<td style="text-align: left;">L</td>
<td style="text-align: right;">0.310</td>
<td style="text-align: left;">Tanner Houck</td>
<td style="text-align: left;">R</td>
<td style="text-align: right;">0.257</td>
<td style="text-align: left;">TRUE</td>
<td style="text-align: right;">0.780</td>
</tr>
<tr class="even">
<td style="text-align: left;">2024-06-29</td>
<td style="text-align: left;">BOS</td>
<td style="text-align: left;">Jackson Merrill</td>
<td style="text-align: left;">L</td>
<td style="text-align: right;">0.303</td>
<td style="text-align: left;">Tanner Houck</td>
<td style="text-align: left;">R</td>
<td style="text-align: right;">0.257</td>
<td style="text-align: left;">TRUE</td>
<td style="text-align: right;">0.770</td>
</tr>
<tr class="odd">
<td style="text-align: left;">2024-06-30</td>
<td style="text-align: left;">KCA</td>
<td style="text-align: left;">Bobby Witt Jr.</td>
<td style="text-align: left;">R</td>
<td style="text-align: right;">0.315</td>
<td style="text-align: left;">Logan Allen</td>
<td style="text-align: left;">L</td>
<td style="text-align: right;">0.276</td>
<td style="text-align: left;">TRUE</td>
<td style="text-align: right;">0.808</td>
</tr>
<tr class="even">
<td style="text-align: left;">2024-06-30</td>
<td style="text-align: left;">BOS</td>
<td style="text-align: left;">Luis Arráez</td>
<td style="text-align: left;">L</td>
<td style="text-align: right;">0.310</td>
<td style="text-align: left;">Josh Winckowski</td>
<td style="text-align: left;">R</td>
<td style="text-align: right;">0.262</td>
<td style="text-align: left;">TRUE</td>
<td style="text-align: right;">0.785</td>
</tr>
<tr class="odd">
<td style="text-align: left;">2024-07-01</td>
<td style="text-align: left;">COL</td>
<td style="text-align: left;">Jackson Chourio</td>
<td style="text-align: left;">R</td>
<td style="text-align: right;">0.274</td>
<td style="text-align: left;">Austin Gomber</td>
<td style="text-align: left;">L</td>
<td style="text-align: right;">0.278</td>
<td style="text-align: left;">TRUE</td>
<td style="text-align: right;">0.780</td>
</tr>
<tr class="even">
<td style="text-align: left;">2024-07-01</td>
<td style="text-align: left;">COL</td>
<td style="text-align: left;">William Contreras</td>
<td style="text-align: left;">R</td>
<td style="text-align: right;">0.269</td>
<td style="text-align: left;">Austin Gomber</td>
<td style="text-align: left;">L</td>
<td style="text-align: right;">0.278</td>
<td style="text-align: left;">TRUE</td>
<td style="text-align: right;">0.773</td>
</tr>
<tr class="odd">
<td style="text-align: left;">2024-07-02</td>
<td style="text-align: left;">KCA</td>
<td style="text-align: left;">Bobby Witt Jr.</td>
<td style="text-align: left;">R</td>
<td style="text-align: right;">0.315</td>
<td style="text-align: left;">Zack Littell</td>
<td style="text-align: left;">R</td>
<td style="text-align: right;">0.263</td>
<td style="text-align: left;">TRUE</td>
<td style="text-align: right;">0.790</td>
</tr>
<tr class="even">
<td style="text-align: left;">2024-07-02</td>
<td style="text-align: left;">NYA</td>
<td style="text-align: left;">Aaron Judge</td>
<td style="text-align: left;">R</td>
<td style="text-align: right;">0.310</td>
<td style="text-align: left;">Graham Ashcraft</td>
<td style="text-align: left;">R</td>
<td style="text-align: right;">0.278</td>
<td style="text-align: left;">TRUE</td>
<td style="text-align: right;">0.757</td>
</tr>
<tr class="odd">
<td style="text-align: left;">2024-07-03</td>
<td style="text-align: left;">TEX</td>
<td style="text-align: left;">Luis Arráez</td>
<td style="text-align: left;">L</td>
<td style="text-align: right;">0.310</td>
<td style="text-align: left;">Jon Gray</td>
<td style="text-align: left;">R</td>
<td style="text-align: right;">0.276</td>
<td style="text-align: left;">TRUE</td>
<td style="text-align: right;">0.778</td>
</tr>
<tr class="even">
<td style="text-align: left;">2024-07-03</td>
<td style="text-align: left;">COL</td>
<td style="text-align: left;">William Contreras</td>
<td style="text-align: left;">R</td>
<td style="text-align: right;">0.269</td>
<td style="text-align: left;">Dakota Hudson</td>
<td style="text-align: left;">R</td>
<td style="text-align: right;">0.291</td>
<td style="text-align: left;">TRUE</td>
<td style="text-align: right;">0.778</td>
</tr>
<tr class="odd">
<td style="text-align: left;">2024-07-04</td>
<td style="text-align: left;">KCA</td>
<td style="text-align: left;">Bobby Witt Jr.</td>
<td style="text-align: left;">R</td>
<td style="text-align: right;">0.315</td>
<td style="text-align: left;">Zach Eflin</td>
<td style="text-align: left;">R</td>
<td style="text-align: right;">0.249</td>
<td style="text-align: left;">TRUE</td>
<td style="text-align: right;">0.777</td>
</tr>
<tr class="even">
<td style="text-align: left;">2024-07-04</td>
<td style="text-align: left;">COL</td>
<td style="text-align: left;">Jackson Chourio</td>
<td style="text-align: left;">R</td>
<td style="text-align: right;">0.274</td>
<td style="text-align: left;">Cal Quantrill</td>
<td style="text-align: left;">R</td>
<td style="text-align: right;">0.274</td>
<td style="text-align: left;">TRUE</td>
<td style="text-align: right;">0.769</td>
</tr>
<tr class="odd">
<td style="text-align: left;">2024-07-05</td>
<td style="text-align: left;">COL</td>
<td style="text-align: left;">Bobby Witt Jr.</td>
<td style="text-align: left;">R</td>
<td style="text-align: right;">0.315</td>
<td style="text-align: left;">Kyle Freeland</td>
<td style="text-align: left;">L</td>
<td style="text-align: right;">0.279</td>
<td style="text-align: left;">TRUE</td>
<td style="text-align: right;">0.834</td>
</tr>
<tr class="even">
<td style="text-align: left;">2024-07-05</td>
<td style="text-align: left;">COL</td>
<td style="text-align: left;">Salvador Pérez</td>
<td style="text-align: left;">R</td>
<td style="text-align: right;">0.275</td>
<td style="text-align: left;">Kyle Freeland</td>
<td style="text-align: left;">L</td>
<td style="text-align: right;">0.279</td>
<td style="text-align: left;">TRUE</td>
<td style="text-align: right;">0.783</td>
</tr>
<tr class="odd">
<td style="text-align: left;">2024-07-06</td>
<td style="text-align: left;">COL</td>
<td style="text-align: left;">Bobby Witt Jr.</td>
<td style="text-align: left;">R</td>
<td style="text-align: right;">0.315</td>
<td style="text-align: left;">Austin Gomber</td>
<td style="text-align: left;">L</td>
<td style="text-align: right;">0.278</td>
<td style="text-align: left;">TRUE</td>
<td style="text-align: right;">0.833</td>
</tr>
</tbody>
</table>
</div>
</div>
</section>
<section id="simulation" class="level2">
<h2 class="anchored" data-anchor-id="simulation">Simulation</h2>
<p>The probabilities used in the previous examples are based on a model with each player’s 2024 xBA. Since this information would not be available to someone making their 2024 selections, the player’s 250 AB rolling xBA will be used as an estimate in the simulations.</p>
<p>With recalculated probabilities, sets of selections can be generated with the same information that would be available to contestants during the 2024 BTS contest. Before that, here is a look at the distribution of hit probabilities for the 2024 season.</p>
<div class="cell">
<div class="cell-output-display">
<div id="fig-histogram-probs" class="quarto-float quarto-figure quarto-figure-center anchored">
<figure class="quarto-float quarto-float-fig figure">
<div aria-describedby="fig-histogram-probs-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca">
<img src="beating_the_streak_files/figure-html/fig-histogram-probs-1.png" class="img-fluid figure-img" style="width:100.0%">
</div>
<figcaption class="quarto-float-caption-bottom quarto-float-caption quarto-float-fig" id="fig-histogram-probs-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca">
Figure&nbsp;2: Histogram of hit probabilities for all possible selections in the 2024 season.
</figcaption>
</figure>
</div>
</div>
</div>
<p>For analysis, 15,000 sets of selections are simulated. Selections are made with the following criteria:</p>
<ul>
<li>Two batters will be selected each day.</li>
<li>Only batters with a hit probability of at least 67.5% will be eligible for selection.</li>
<li>The chance that a batter is selected is proportional to their hit probability. E.g. a batter with a hit probability of 0.75 is 50% more likely to be selected than a batter with a hit probability of 0.50.</li>
</ul>
<p>In the simulations, these were the most selected batters, pitchers, and parks. The list of batters is unsurprisingly correlated to batters with a high xBA. <a href="https://www.baseball-reference.com/players/s/sotoju01.shtml">Juan Soto</a>, <a href="https://www.baseball-reference.com/players/w/wittbo02.shtml">Bobby Witt Jr.</a>, and <a href="https://www.baseball-reference.com/players/g/guerrvl02.shtml">Vladimir Guerrero Jr.</a> were the top three batters by xBA in 2024. Similarly, the pitchers on this list all had a high xBA in 2024, but there is a bias towards Rockies pitchers since they pitch half their games at <a href="https://www.baseball-reference.com/bullpen/Coors_Field">Coors Field</a>, which is by far the most selected park.</p>
<div>

</div>
<div class="cell quarto-layout-panel" data-layout-ncol="3">
<div class="quarto-layout-row">
<div class="quarto-layout-cell" style="flex-basis: 33.3%;justify-content: center;">
<table class="caption-top table table-sm table-striped small">
<caption>Batters</caption>
<thead>
<tr class="header">
<th style="text-align: left;">batter</th>
<th style="text-align: right;">n</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td style="text-align: left;">Juan Soto</td>
<td style="text-align: right;">100962</td>
</tr>
<tr class="even">
<td style="text-align: left;">Bobby Witt Jr.</td>
<td style="text-align: right;">94620</td>
</tr>
<tr class="odd">
<td style="text-align: left;">Luis Arráez</td>
<td style="text-align: right;">90838</td>
</tr>
<tr class="even">
<td style="text-align: left;">Vladimir Guerrero</td>
<td style="text-align: right;">86775</td>
</tr>
<tr class="odd">
<td style="text-align: left;">Alec Bohm</td>
<td style="text-align: right;">85070</td>
</tr>
<tr class="even">
<td style="text-align: left;">Marcell Ozuna</td>
<td style="text-align: right;">82035</td>
</tr>
<tr class="odd">
<td style="text-align: left;">Yainer Diaz</td>
<td style="text-align: right;">77167</td>
</tr>
<tr class="even">
<td style="text-align: left;">Yordan Álvarez</td>
<td style="text-align: right;">76824</td>
</tr>
<tr class="odd">
<td style="text-align: left;">Aaron Judge</td>
<td style="text-align: right;">76349</td>
</tr>
<tr class="even">
<td style="text-align: left;">Shohei Ohtani</td>
<td style="text-align: right;">74289</td>
</tr>
</tbody>
</table>
</div>
<div class="quarto-layout-cell" style="flex-basis: 33.3%;justify-content: center;">
<table class="caption-top table table-sm table-striped small">
<caption>Pitchers</caption>
<thead>
<tr class="header">
<th style="text-align: left;">pitcher</th>
<th style="text-align: right;">n</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td style="text-align: left;">Patrick Corbin</td>
<td style="text-align: right;">114411</td>
</tr>
<tr class="even">
<td style="text-align: left;">Austin Gomber</td>
<td style="text-align: right;">111107</td>
</tr>
<tr class="odd">
<td style="text-align: left;">Cal Quantrill</td>
<td style="text-align: right;">108909</td>
</tr>
<tr class="even">
<td style="text-align: left;">Logan Webb</td>
<td style="text-align: right;">97029</td>
</tr>
<tr class="odd">
<td style="text-align: left;">Ryan Feltner</td>
<td style="text-align: right;">81491</td>
</tr>
<tr class="even">
<td style="text-align: left;">MacKenzie Gore</td>
<td style="text-align: right;">80835</td>
</tr>
<tr class="odd">
<td style="text-align: left;">Ryne Nelson</td>
<td style="text-align: right;">78516</td>
</tr>
<tr class="even">
<td style="text-align: left;">Chris Flexen</td>
<td style="text-align: right;">78252</td>
</tr>
<tr class="odd">
<td style="text-align: left;">Dakota Hudson</td>
<td style="text-align: right;">73554</td>
</tr>
<tr class="even">
<td style="text-align: left;">Miles Mikolas</td>
<td style="text-align: right;">73071</td>
</tr>
</tbody>
</table>
</div>
<div class="quarto-layout-cell" style="flex-basis: 33.3%;justify-content: center;">
<table class="caption-top table table-sm table-striped small">
<caption>Park</caption>
<thead>
<tr class="header">
<th style="text-align: left;">park</th>
<th style="text-align: right;">n</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td style="text-align: left;">COL</td>
<td style="text-align: right;">474777</td>
</tr>
<tr class="even">
<td style="text-align: left;">KCA</td>
<td style="text-align: right;">321821</td>
</tr>
<tr class="odd">
<td style="text-align: left;">ARI</td>
<td style="text-align: right;">312640</td>
</tr>
<tr class="even">
<td style="text-align: left;">WAS</td>
<td style="text-align: right;">302927</td>
</tr>
<tr class="odd">
<td style="text-align: left;">BOS</td>
<td style="text-align: right;">281048</td>
</tr>
<tr class="even">
<td style="text-align: left;">PHI</td>
<td style="text-align: right;">236432</td>
</tr>
<tr class="odd">
<td style="text-align: left;">HOU</td>
<td style="text-align: right;">233940</td>
</tr>
<tr class="even">
<td style="text-align: left;">SDN</td>
<td style="text-align: right;">228595</td>
</tr>
<tr class="odd">
<td style="text-align: left;">SLN</td>
<td style="text-align: right;">221624</td>
</tr>
<tr class="even">
<td style="text-align: left;">ATL</td>
<td style="text-align: right;">202143</td>
</tr>
</tbody>
</table>
</div>
</div>
</div>
<p>The sad reality of BTS is that even with a “decent” strategy, most contestants will top out at a streak of between 10 and 14.</p>
<div class="cell">
<div class="cell-output-display">
<div id="fig-bar-streaks" class="quarto-float quarto-figure quarto-figure-center anchored">
<figure class="quarto-float quarto-float-fig figure">
<div aria-describedby="fig-bar-streaks-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca">
<img src="beating_the_streak_files/figure-html/fig-bar-streaks-1.png" class="img-fluid figure-img" style="width:100.0%">
</div>
<figcaption class="quarto-float-caption-bottom quarto-float-caption quarto-float-fig" id="fig-bar-streaks-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca">
Figure&nbsp;3: Bar graph of the longest streaks for simulated selections of the 2024 season.
</figcaption>
</figure>
</div>
</div>
</div>
<p>This is the reality even though contestants can reasonably maintain a success rate of 70% or higher.</p>
<div class="cell">
<div class="cell-output-display">
<div id="fig-histogram-success-rate" class="quarto-float quarto-figure quarto-figure-center anchored">
<figure class="quarto-float quarto-float-fig figure">
<div aria-describedby="fig-histogram-success-rate-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca">
<img src="beating_the_streak_files/figure-html/fig-histogram-success-rate-1.png" class="img-fluid figure-img" style="width:100.0%">
</div>
<figcaption class="quarto-float-caption-bottom quarto-float-caption quarto-float-fig" id="fig-histogram-success-rate-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca">
Figure&nbsp;4: Histogram of success rates for simulated selections of the 2024 season.
</figcaption>
</figure>
</div>
</div>
</div>
<p>It’s well understood that the average contestant is extremely unlikely to even come close to the 57 hit-streak goal, but what was the longest streak of the 15,000 simulations?</p>
<div class="cell">
<div class="cell-output-display">
<div id="fig-step-best-sim" class="quarto-float quarto-figure quarto-figure-center anchored">
<figure class="quarto-float quarto-float-fig figure">
<div aria-describedby="fig-step-best-sim-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca">
<img src="beating_the_streak_files/figure-html/fig-step-best-sim-1.png" class="img-fluid figure-img" style="width:100.0%">
</div>
<figcaption class="quarto-float-caption-bottom quarto-float-caption quarto-float-fig" id="fig-step-best-sim-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca">
Figure&nbsp;5: Stairstep plot of the current streak for the best simulation of the 2024 season.
</figcaption>
</figure>
</div>
</div>
</div>
<p>The best simulation was able to reach a streak of 48, well short of the 57 necessary to claim the grand prize.</p>
</section>
<section id="is-the-streak-beatable" class="level2">
<h2 class="anchored" data-anchor-id="is-the-streak-beatable">Is the streak beatable?</h2>
<p>Now that all hopes and dreams of winning have been crushed, what is roughly the chance of a contestant beating the streak using this strategy? By using the simulations and calculating the chance of a success of any given day, the approximate chance of a contestant beating the streak with this strategy in 2024 was 1 in 3,613,381. Still better than zero i guess…</p>
<div class="cell">
<div class="cell-output-display">
<div id="fig-histogram-win-rate" class="quarto-float quarto-figure quarto-figure-center anchored">
<figure class="quarto-float quarto-float-fig figure">
<div aria-describedby="fig-histogram-win-rate-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca">
<img src="beating_the_streak_files/figure-html/fig-histogram-win-rate-1.png" class="img-fluid figure-img" style="width:100.0%">
</div>
<figcaption class="quarto-float-caption-bottom quarto-float-caption quarto-float-fig" id="fig-histogram-win-rate-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca">
Figure&nbsp;6: Histogram of win rates for simulated selections of the 2024 season.
</figcaption>
</figure>
</div>
</div>
</div>
<p>Thank you to anyone for reading and good luck in 2025!</p>


</section>

</main> <!-- /main -->
<script id="quarto-html-after-body" type="application/javascript">
window.document.addEventListener("DOMContentLoaded", function (event) {
  const toggleBodyColorMode = (bsSheetEl) => {
    const mode = bsSheetEl.getAttribute("data-mode");
    const bodyEl = window.document.querySelector("body");
    if (mode === "dark") {
      bodyEl.classList.add("quarto-dark");
      bodyEl.classList.remove("quarto-light");
    } else {
      bodyEl.classList.add("quarto-light");
      bodyEl.classList.remove("quarto-dark");
    }
  }
  const toggleBodyColorPrimary = () => {
    const bsSheetEl = window.document.querySelector("link#quarto-bootstrap");
    if (bsSheetEl) {
      toggleBodyColorMode(bsSheetEl);
    }
  }
  toggleBodyColorPrimary();  
  const icon = "";
  const anchorJS = new window.AnchorJS();
  anchorJS.options = {
    placement: 'right',
    icon: icon
  };
  anchorJS.add('.anchored');
    var localhostRegex = new RegExp(/^(?:http|https):\/\/localhost\:?[0-9]*\//);
    var mailtoRegex = new RegExp(/^mailto:/);
      var filterRegex = new RegExp('/' + window.location.host + '/');
    var isInternal = (href) => {
        return filterRegex.test(href) || localhostRegex.test(href) || mailtoRegex.test(href);
    }
    // Inspect non-navigation links and adorn them if external
 	var links = window.document.querySelectorAll('a[href]:not(.nav-link):not(.navbar-brand):not(.toc-action):not(.sidebar-link):not(.sidebar-item-toggle):not(.pagination-link):not(.no-external):not([aria-hidden]):not(.dropdown-item):not(.quarto-navigation-tool):not(.about-link)');
    for (var i=0; i<links.length; i++) {
      const link = links[i];
      if (!isInternal(link.href)) {
        // undo the damage that might have been done by quarto-nav.js in the case of
        // links that we want to consider external
        if (link.dataset.originalHref !== undefined) {
          link.href = link.dataset.originalHref;
        }
      }
    }
  function tippyHover(el, contentFn, onTriggerFn, onUntriggerFn) {
    const config = {
      allowHTML: true,
      maxWidth: 500,
      delay: 100,
      arrow: false,
      appendTo: function(el) {
          return el.parentElement;
      },
      interactive: true,
      interactiveBorder: 10,
      theme: 'quarto',
      placement: 'bottom-start',
    };
    if (contentFn) {
      config.content = contentFn;
    }
    if (onTriggerFn) {
      config.onTrigger = onTriggerFn;
    }
    if (onUntriggerFn) {
      config.onUntrigger = onUntriggerFn;
    }
    window.tippy(el, config); 
  }
  const noterefs = window.document.querySelectorAll('a[role="doc-noteref"]');
  for (var i=0; i<noterefs.length; i++) {
    const ref = noterefs[i];
    tippyHover(ref, function() {
      // use id or data attribute instead here
      let href = ref.getAttribute('data-footnote-href') || ref.getAttribute('href');
      try { href = new URL(href).hash; } catch {}
      const id = href.replace(/^#\/?/, "");
      const note = window.document.getElementById(id);
      if (note) {
        return note.innerHTML;
      } else {
        return "";
      }
    });
  }
  const xrefs = window.document.querySelectorAll('a.quarto-xref');
  const processXRef = (id, note) => {
    // Strip column container classes
    const stripColumnClz = (el) => {
      el.classList.remove("page-full", "page-columns");
      if (el.children) {
        for (const child of el.children) {
          stripColumnClz(child);
        }
      }
    }
    stripColumnClz(note)
    if (id === null || id.startsWith('sec-')) {
      // Special case sections, only their first couple elements
      const container = document.createElement("div");
      if (note.children && note.children.length > 2) {
        container.appendChild(note.children[0].cloneNode(true));
        for (let i = 1; i < note.children.length; i++) {
          const child = note.children[i];
          if (child.tagName === "P" && child.innerText === "") {
            continue;
          } else {
            container.appendChild(child.cloneNode(true));
            break;
          }
        }
        if (window.Quarto?.typesetMath) {
          window.Quarto.typesetMath(container);
        }
        return container.innerHTML
      } else {
        if (window.Quarto?.typesetMath) {
          window.Quarto.typesetMath(note);
        }
        return note.innerHTML;
      }
    } else {
      // Remove any anchor links if they are present
      const anchorLink = note.querySelector('a.anchorjs-link');
      if (anchorLink) {
        anchorLink.remove();
      }
      if (window.Quarto?.typesetMath) {
        window.Quarto.typesetMath(note);
      }
      // TODO in 1.5, we should make sure this works without a callout special case
      if (note.classList.contains("callout")) {
        return note.outerHTML;
      } else {
        return note.innerHTML;
      }
    }
  }
  for (var i=0; i<xrefs.length; i++) {
    const xref = xrefs[i];
    tippyHover(xref, undefined, function(instance) {
      instance.disable();
      let url = xref.getAttribute('href');
      let hash = undefined; 
      if (url.startsWith('#')) {
        hash = url;
      } else {
        try { hash = new URL(url).hash; } catch {}
      }
      if (hash) {
        const id = hash.replace(/^#\/?/, "");
        const note = window.document.getElementById(id);
        if (note !== null) {
          try {
            const html = processXRef(id, note.cloneNode(true));
            instance.setContent(html);
          } finally {
            instance.enable();
            instance.show();
          }
        } else {
          // See if we can fetch this
          fetch(url.split('#')[0])
          .then(res => res.text())
          .then(html => {
            const parser = new DOMParser();
            const htmlDoc = parser.parseFromString(html, "text/html");
            const note = htmlDoc.getElementById(id);
            if (note !== null) {
              const html = processXRef(id, note);
              instance.setContent(html);
            } 
          }).finally(() => {
            instance.enable();
            instance.show();
          });
        }
      } else {
        // See if we can fetch a full url (with no hash to target)
        // This is a special case and we should probably do some content thinning / targeting
        fetch(url)
        .then(res => res.text())
        .then(html => {
          const parser = new DOMParser();
          const htmlDoc = parser.parseFromString(html, "text/html");
          const note = htmlDoc.querySelector('main.content');
          if (note !== null) {
            // This should only happen for chapter cross references
            // (since there is no id in the URL)
            // remove the first header
            if (note.children.length > 0 && note.children[0].tagName === "HEADER") {
              note.children[0].remove();
            }
            const html = processXRef(null, note);
            instance.setContent(html);
          } 
        }).finally(() => {
          instance.enable();
          instance.show();
        });
      }
    }, function(instance) {
    });
  }
      let selectedAnnoteEl;
      const selectorForAnnotation = ( cell, annotation) => {
        let cellAttr = 'data-code-cell="' + cell + '"';
        let lineAttr = 'data-code-annotation="' +  annotation + '"';
        const selector = 'span[' + cellAttr + '][' + lineAttr + ']';
        return selector;
      }
      const selectCodeLines = (annoteEl) => {
        const doc = window.document;
        const targetCell = annoteEl.getAttribute("data-target-cell");
        const targetAnnotation = annoteEl.getAttribute("data-target-annotation");
        const annoteSpan = window.document.querySelector(selectorForAnnotation(targetCell, targetAnnotation));
        const lines = annoteSpan.getAttribute("data-code-lines").split(",");
        const lineIds = lines.map((line) => {
          return targetCell + "-" + line;
        })
        let top = null;
        let height = null;
        let parent = null;
        if (lineIds.length > 0) {
            //compute the position of the single el (top and bottom and make a div)
            const el = window.document.getElementById(lineIds[0]);
            top = el.offsetTop;
            height = el.offsetHeight;
            parent = el.parentElement.parentElement;
          if (lineIds.length > 1) {
            const lastEl = window.document.getElementById(lineIds[lineIds.length - 1]);
            const bottom = lastEl.offsetTop + lastEl.offsetHeight;
            height = bottom - top;
          }
          if (top !== null && height !== null && parent !== null) {
            // cook up a div (if necessary) and position it 
            let div = window.document.getElementById("code-annotation-line-highlight");
            if (div === null) {
              div = window.document.createElement("div");
              div.setAttribute("id", "code-annotation-line-highlight");
              div.style.position = 'absolute';
              parent.appendChild(div);
            }
            div.style.top = top - 2 + "px";
            div.style.height = height + 4 + "px";
            div.style.left = 0;
            let gutterDiv = window.document.getElementById("code-annotation-line-highlight-gutter");
            if (gutterDiv === null) {
              gutterDiv = window.document.createElement("div");
              gutterDiv.setAttribute("id", "code-annotation-line-highlight-gutter");
              gutterDiv.style.position = 'absolute';
              const codeCell = window.document.getElementById(targetCell);
              const gutter = codeCell.querySelector('.code-annotation-gutter');
              gutter.appendChild(gutterDiv);
            }
            gutterDiv.style.top = top - 2 + "px";
            gutterDiv.style.height = height + 4 + "px";
          }
          selectedAnnoteEl = annoteEl;
        }
      };
      const unselectCodeLines = () => {
        const elementsIds = ["code-annotation-line-highlight", "code-annotation-line-highlight-gutter"];
        elementsIds.forEach((elId) => {
          const div = window.document.getElementById(elId);
          if (div) {
            div.remove();
          }
        });
        selectedAnnoteEl = undefined;
      };
        // Handle positioning of the toggle
    window.addEventListener(
      "resize",
      throttle(() => {
        elRect = undefined;
        if (selectedAnnoteEl) {
          selectCodeLines(selectedAnnoteEl);
        }
      }, 10)
    );
    function throttle(fn, ms) {
    let throttle = false;
    let timer;
      return (...args) => {
        if(!throttle) { // first call gets through
            fn.apply(this, args);
            throttle = true;
        } else { // all the others get throttled
            if(timer) clearTimeout(timer); // cancel #2
            timer = setTimeout(() => {
              fn.apply(this, args);
              timer = throttle = false;
            }, ms);
        }
      };
    }
      // Attach click handler to the DT
      const annoteDls = window.document.querySelectorAll('dt[data-target-cell]');
      for (const annoteDlNode of annoteDls) {
        annoteDlNode.addEventListener('click', (event) => {
          const clickedEl = event.target;
          if (clickedEl !== selectedAnnoteEl) {
            unselectCodeLines();
            const activeEl = window.document.querySelector('dt[data-target-cell].code-annotation-active');
            if (activeEl) {
              activeEl.classList.remove('code-annotation-active');
            }
            selectCodeLines(clickedEl);
            clickedEl.classList.add('code-annotation-active');
          } else {
            // Unselect the line
            unselectCodeLines();
            clickedEl.classList.remove('code-annotation-active');
          }
        });
      }
  const findCites = (el) => {
    const parentEl = el.parentElement;
    if (parentEl) {
      const cites = parentEl.dataset.cites;
      if (cites) {
        return {
          el,
          cites: cites.split(' ')
        };
      } else {
        return findCites(el.parentElement)
      }
    } else {
      return undefined;
    }
  };
  var bibliorefs = window.document.querySelectorAll('a[role="doc-biblioref"]');
  for (var i=0; i<bibliorefs.length; i++) {
    const ref = bibliorefs[i];
    const citeInfo = findCites(ref);
    if (citeInfo) {
      tippyHover(citeInfo.el, function() {
        var popup = window.document.createElement('div');
        citeInfo.cites.forEach(function(cite) {
          var citeDiv = window.document.createElement('div');
          citeDiv.classList.add('hanging-indent');
          citeDiv.classList.add('csl-entry');
          var biblioDiv = window.document.getElementById('ref-' + cite);
          if (biblioDiv) {
            citeDiv.innerHTML = biblioDiv.innerHTML;
          }
          popup.appendChild(citeDiv);
        });
        return popup.innerHTML;
      });
    }
  }
});
</script>
</div> <!-- /content -->




<script src="site_libs/quarto-html/zenscroll-min.js"></script>
</body></html>